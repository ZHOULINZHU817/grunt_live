/*frame by Ella Liu*/
!function(t){var e=navigator.userAgent.toLowerCase(),i=Object.prototype.toString,n=/opera/.test(e),o=/\bchrome\b/.test(e),s=/webkit/.test(e),a=!o&&/safari/.test(e),r=!n&&/msie/.test(e),l=!!document.createElement("canvas").getContext,c=!s&&/gecko/.test(e),u=/ipod|ipad|iphone|android/gi.test(e),h=function(t,e,i,n){return i*t/n+e},g={easeIn:function(t,e,i,n){return i*(t/=n)*t*t+e},easeOut:function(t,e,i,n){return i*((t=t/n-1)*t*t+1)+e},easeInOut:function(t,e,i,n){return 1>(t/=n/2)?i/2*t*t*t+e:i/2*((t-=2)*t*t+2)+e}},d=function(t){var e=!1,p=!1,f=[],y=document.addEventListener?function(){document.removeEventListener("DOMContentLoaded",y,!1),_()}:document.attachEvent?function(){"complete"===document.readyState&&(document.detachEvent("onreadystatechange",y),_())}:void 0,x=function(){if(!e){try{document.documentElement.doScroll("left")}catch(t){return void setTimeout(x,1)}_()}},_=function(){if(!e){e=!0;for(var t=0;t<f.length;t++)f[t].call(document);f=[]}},b=function(){if(!p){if(p=!0,"complete"===document.readyState)return setTimeout(_,1);if(document.addEventListener)document.addEventListener("DOMContentLoaded",y,!1),t.addEventListener("load",_,!1);else if(document.attachEvent){document.attachEvent("onreadystatechange",y),t.attachEvent("onload",_);var e=!1;try{e=null==t.frameElement}catch(t){}document.documentElement.doScroll&&e&&x()}}},m=function(t){b(),e?t.call(document,v):f.push(function(){return t.call(this)})},v=function(t){return!t||t.nodeType?t:"string"==typeof t?(-1!=t.indexOf("#")&&(t=t.substring(1)),document.getElementById(t)):void("function"==typeof t&&m(t))};v.apply=function(t,e){if(t&&e&&"object"==typeof e)for(var i in e)void 0!==e[i]&&(t[i]=e[i]);if(!e&&t){var n={};for(i in t)n[i]=t[i];return n}return t},v.apply(v,{version:"1.0",email:"taylor@ichartjs.com",isEmpty:function(t,e){return null===t||void 0===t||v.isArray(t)&&!t.length||!e&&""===t},isArray:function(t){return"[object Array]"===i.apply(t)},isDate:function(t){return"[object Date]"===i.apply(t)},isObject:function(t){return!!t&&"[object Object]"===i.apply(t)},isFunction:function(t){return"[object Function]"===i.apply(t)},isNumber:function(t){return"number"==typeof t&&isFinite(t)},isString:function(t){return"string"==typeof t},isBoolean:function(t){return"boolean"==typeof t},isFalse:function(t){return"boolean"==typeof t&&!t},isElement:function(t){return!!t&&!!t.tagName},isDefined:function(t){return void 0!==t}}),v.applyIf=function(t,e){if(t&&v.isObject(e))for(var i in e)v.isDefined(e[i])&&!v.isDefined(t[i])&&(t[i]=e[i]);return!e&&t?v.apply(t):t},v.merge=function(t,e,i){if(t&&v.isObject(e)){for(var n in e)v.isDefined(e[n])&&(v.isObject(e[n])?v.isObject(t[n])?v.merge(t[n],e[n]):t[n]=v.clone(e[n],!0):t[n]=e[n]);if(v.isObject(i))return v.merge(t,i)}return t},v.clone=function(t,e,i){var n={};if(v.isArray(t)&&v.isObject(e))for(var o=0;o<t.length;o++)n[t[o]]=i&&v.isObject(e[t[o]])?v.clone(e[t[o]],i):e[t[o]];else if(v.isObject(t))for(o in t)n[o]=e&&v.isObject(t[o])&&!t[o].ICHARTJS_OBJECT?v.clone(t[o],e):t[o];return n},v.override=function(t,e){if(t&&e){var i=t.prototype;v.apply(i,e),v.isIE&&e.hasOwnProperty("toString")&&(i.toString=e.toString)}},v.extend=function(){var t=function(t){for(var e in t)this[e]=t[e]},e=Object.prototype.constructor;return function(i,n){var o=function(){i.apply(this,arguments)},s=function(){},a=i.prototype;return s.prototype=a,s=o.prototype=new s,s.constructor=o,o.superclass=a,a.constructor==e&&(a.constructor=i),o.override=function(t){v.override(o,t)},s.superclass=s.supr=function(){return a},s.override=t,v.override(o,n),o.extend=function(t){return v.extend(o,t)},o.plugin_={},o.plugin=function(t,e){v.isString(t)&&v.isFunction(e)&&(o.plugin_[t]=e)},o}}();var w=Math.sin,T=Math.cos,A=Math.atan,C=Math.sqrt,D=Math.abs,k=Math.PI,S=2*k,E=Math.ceil,z=Math.round,P=Math.floor,O=Math.max,I=Math.min,R=parseFloat,M={},L={},H=function(t,e){if(0==t)return t;var i=D(t),n=.1;if(1<i){for(;1<i;)i/=10,n*=10;return P(t/n+e)*n}for(n=1;1>i;)i*=10,n*=10;return z(t*n+e)/n},F={white:"rgb(255,255,255)",green:"rgb(0,128,0)",gray:"rgb(80,80,80)",red:"rgb(255,0,0)",blue:"rgb(0,0,255)",yellow:"rgb(255,255,0)",black:"rgb(0,0,0)"},B=function(t){var e=/rgb\((\w*),(\w*),(\w*)\)/.exec(t);if(e)return[e[1],e[2],e[3]];if(e=/rgba\((\w*),(\w*),(\w*),(.*)\)/.exec(t))return[e[1],e[2],e[3],e[4]];throw Error("invalid colors value '"+t+"'")},X=function(t){if(!t)return t;if(t=t.replace(/\s/g,"").toLowerCase(),/^rgb\([0-9]{1,3},[0-9]{1,3},[0-9]{1,3}\)$/.exec(t)||/^rgba\([0-9]{1,3},[0-9]{1,3},[0-9]{1,3},(0(\.[0-9])?|1(\.0)?)\)$/.exec(t))return t;if(/^#(([a-fA-F0-9]{6,7})|([a-fA-F0-9]{3}))$/.exec(t))return(7==(t=t.replace(/#/g,"").replace(/^(\w)(\w)(\w)$/,"$1$1$2$2$3$3")).length?"rgba(":"rgb(")+parseInt(t.substring(0,2),16)+","+parseInt(t.substring(2,4),16)+","+parseInt(t.substring(4,6),16)+(7==t.length?",0."+t.substring(6,7)+")":")");if(F[t])return F[t];throw Error("invalid colors value '"+t+"'")},Y=function(t,e){return e=e||.14,.5<t?e-(1-t)/10:.1<t?e-.16+t/5:t>e?e:t/2},j=function(t,e,i,n){if(!e)return e;var o;o=e=B(X(e));var s=void 0,a=void 0;v.isArray(o)&&(s=o[1],a=o[2],o=o[0]);var a=a/255,r=O(O(o/=255,s=s/255),a),l=I(I(o,s),a);if(0==(l=r-l))o=[0,0,r];else{var c;o==r?c=(s-a)/l:s==r?c=(a-o)/l+2:a==r&&(c=(o-s)/l+4),0>(c*=60)&&(c+=360),o=[c,l/r,r]}o[1]-=0!=n?n||.05:n,t?(o[2]-=Y(o[2],i),o[1]=v.upTo(o[1],1),o[2]=v.lowTo(o[2],0)):(o[2]+=Y(1-o[2],i),o[1]=v.lowTo(o[1],0),o[2]=v.upTo(o[2],1)),n=e[3],t=e=void 0,v.isArray(o)&&(t=n,n=o[1],e=o[2],o=o[0]);var u,h,g,a=o/60-(i=P(o/60)%6);switch(o=e*(1-n),s=e*(1-n*a),n=e*(1-n*(1-a)),i){case 0:u=e,h=n,g=o;break;case 1:u=s,h=e,g=o;break;case 2:u=o,h=e,g=n;break;case 3:u=o,h=s,g=e;break;case 4:u=n,h=o,g=e;break;case 5:u=e,h=o,g=s}return"rgb"+(t?"a":"")+"("+z(255*u)+","+z(255*h)+","+z(255*g)+(t?","+t+")":")")};return v.apply(v,{getFont:function(t,e,i,n){return t+" "+e+(n||"px")+" "+i},getDoc:function(){return t.contentWindow?t.contentWindow.document:t.contentDocument?t.contentDocument:t.document},DefineAbstract:function(t,e){if(!e[t])throw Error("Cannot instantiate the type '"+e.type+"'.you must implements it with method '"+t+"'.")},getAA:function(t){return"linear"==t?h:"easeInOut"==t||"easeIn"==t||"easeOut"==t?g[t]:h},noConflict:function(){return d},plugin:function(t,e,i){v.isFunction(t)&&t.plugin(e,i)},parsePadding:function(t,e){return t=t||0,v.isNumber(t)?[t,t,t,t]:v.isArray(t)?t:(e=e||0,1==(t=t.replace(/^\s+|\s+$/g,"").replace(/\s{2,}/g,/\s/).replace(/\s/g,",").split(",")).length?t[0]=t[1]=t[2]=t[3]=R(t[0])||e:2==t.length?(t[0]=t[2]=R(t[0])||e,t[1]=t[3]=R(t[1])||e):3==t.length?(t[0]=R(t[0])||e,t[1]=t[3]=R(t[1])||e,t[2]=R(t[2])||e):(t[0]=R(t[0])||e,t[1]=R(t[1])||e,t[2]=R(t[2])||e,t[3]=R(t[3])||e),t)},distanceP2P:function(t,e,i,n){return C((i-t)*(i-t)+(n-e)*(n-e))},atan2Radian:function(t,e,i,n){if(t==i)return n>e?k/2:3*k/2;if(e==n)return i>t?0:k;var o=v.quadrant(t,e,i,n),t=A(D((e-n)/(t-i)));return o?(3==o?S:k)+(2==o?t:-t):t},angle2Radian:function(t){return t*k/180},radian2Angle:function(t){return 180*t/k},quadrant:function(t,e,i,n){return t<i?e<n?0:3:e<n?1:2},toPI2:function(t){for(;0>t;)t+=S;return t},visible:function(t,e,i){if(t>=e)return[];var n=v.quadrantd(t),o=v.quadrantd(e);if((2==n||3==n)&&(2==o||3==o)&&e-t<k)return[];if(t=v.toPI2(t),(e=v.toPI2(e))<=t&&(e+=S),t>k)t=S;else{if(e>S)return[{s:t,e:k,f:i},{s:S,e:e,f:i}];e>k&&(e=k)}return{s:t,e:e,f:i}},quadrantd:function(t){if(0==t)return 0;if(0==t%S)return 3;for(;0>t;)t+=S;return E(t%S*2/k)-1},upTo:function(t,e){return e>t?t:e},lowTo:function(t,e){return e<t?t:e},between:function(t,e,i){return t>e?v.between(e,t,i):i>e?e:i<t?t:i},inRange:function(t,e,i){return e>i&&t<i},angleInRange:function(t,e,i){return i-=t,i=0>i?i+S:i,i%=S,e-t>i},angleZInRange:function(t,e,i){return e<t?i>t||i<e:e>i&&t<i},inRangeClosed:function(t,e,i){return e>=i&&t<=i},inEllipse:function(t,e,i,n){return 1>=t*t/i/i+e*e/n/n},p2Point:function(t,e,i,n){return{x:t+T(i)*n,y:e+w(i)*n}},toRgb:X,toRgba:function(t,e){var i=B(X(t));return"rgba("+i[0]+","+i[1]+","+i[2]+","+e+")"},vectorP2P:function(t,e,i){return i||(e=v.angle2Radian(e),t=v.angle2Radian(t)),e=w(e),{x:e*w(t),y:e*T(t)}},uid:function(t){return(t||"ichartjs")+"_"+E(1e4*Math.random())+(new Date).getTime().toString().substring(4)},register:function(t){if(v.isString(t))L[t.toLowerCase()]=t;else{var e=t.get("id");if(!e||""==e){for(e=v.uid(t.type);M[e];)e=v.uid(t.type);t.push("id",e)}if(M[e])throw Error("exist reduplicate id :"+e);t.id=e,M[e]=t}},create:function(t){if(!t.type||!L[t.type])throw Error("TypeNotFoundException["+t.type+"]");return new v[L[t.type]](t)},get:function(t){return M[t]},isPercent:function(t){return v.isString(t)&&t.match(/(.*)%/)},parsePercent:function(t,e){return v.isString(t)&&(t=t.match(/(.*)%/))&&(t=e?P(R(t[1])*e/100):t[1]/100),!t||0>=t||t>e?e:t},parseFloat:function(t,e){if(!v.isNumber(t)&&(t=R(t),!v.isNumber(t)))throw Error("["+e+"]="+t+"is not a valid number.");return t},ceil:function(t){return H(t,1)},floor:function(t){return H(t,-1)},_2D:"2d",_3D:"3d",light:function(t,e,i){return j(!1,t,e,i)},dark:function(t,e,i){return j(!0,t,e,i)},fixPixel:function(t){return v.isNumber(t)?t:R(t.replace("px",""))||0},toPixel:function(t){return v.isNumber(t)?t+"px":v.fixPixel(t)+"px"},emptyFn:function(){return!0},supportCanvas:l,isOpera:n,isWebKit:s,isChrome:o,isSafari:a,isIE:r,isGecko:c,isMobile:u,touch:"ontouchend"in document,FRAME:u?30:60}),v.Assert={isTrue:function(t,e){if(!0!==t)throw Error(e)}},v.requestAnimFrame=function(){var e=t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||t.oRequestAnimationFrame||t.msRequestAnimationFrame||function(e){t.setTimeout(e,1e3/60)};return function(t){e(t)}}(),v.Event={addEvent:function(t,e,i,n){t.addEventListener?t.addEventListener(e,i,n):t.attachEvent?t.attachEvent("on"+e,i):t["on"+e]=i},fix:function(e){void 0===e&&(e=t.event);var i={target:e.target,pageX:e.pageX,pageY:e.pageY,offsetX:e.offsetX,offsetY:e.offsetY,stopPropagation:!1,event:e};if(void 0===e.offsetX){if(e.target||(i.target=e.srcElement||document),e.targetTouches&&(i.pageX=e.targetTouches[0].pageX,i.pageY=e.targetTouches[0].pageY),null==i.pageX&&null!=e.clientX){var n=document.documentElement,o=document.body;i.pageX=e.clientX+(n&&n.scrollLeft||o&&o.scrollLeft||0)-(n&&n.clientLeft||o&&o.clientLeft||0),i.pageY=e.clientY+(n&&n.scrollTop||o&&o.scrollTop||0)-(n&&n.clientTop||o&&o.clientTop||0)}for(var o=n=0,s=e.target;s!=document.body&&s;)n+=s.offsetLeft-(s.scrollLeft||0),o+=s.offsetTop,s=s.offsetParent;i.offsetX=i.pageX-n,i.offsetY=i.pageY-o}return i.x=i.offsetX,i.y=i.offsetY,e.stopPropagation||(e.stopPropagation=function(){t.event.cancelBubble=!0}),i}},v}(t);Array.prototype.each=function(t,e){for(var i,n=this.length,o=0;o<n&&("boolean"!=typeof(i=e?t.call(e,this[o],o):t(this[o],o))||i);o++);return this},Array.prototype.eachAll=function(t,e){this.each(function(i,n){return d.isArray(i)?i.eachAll(t,e):e?t.call(e,i,n):t(i,n)},e)},Array.prototype.sor=function(t){for(var e,i=this.length-1,n=0;n<i;n++)for(var o=i;o>n;o--)(t?!t(this[o],this[o-1]):this[o]<this[o-1])&&(e=this[o],this[o]=this[o-1],this[o-1]=e)},t.iChart=d,t.$||(t.$=t.iChart)}(window),function(t){t.Element=function(e){var i=this._();i.type="element",i.ICHARTJS_OBJECT=!0,t.DefineAbstract("configure",i),t.DefineAbstract("afterConfiguration",i),i.options={},i.set({border:{enable:!1,color:"#BCBCBC",style:"solid",width:1,radius:0},shadow:!1,shadow_color:"#666666",shadow_blur:4,shadow_offsetx:0,shadow_offsety:0}),i.W="width",i.H="height",i.O="top",i.B="bottom",i.L="left",i.R="right",i.C="center",i.X="originx",i.Y="originy",i.variable={},i.events={mouseup:[],touchstart:[],touchmove:[],touchend:[],mousedown:[],dblclick:[]},i.registerEvent("initialize"),i.initialization=!1,i.configure.apply(i,Array.prototype.slice.call(arguments,1)),i.default_=t.clone(i.options,!0),i.set(e),i.afterConfiguration(i)},t.Element.prototype={_:function(){return this},afterConfiguration:function(e){if(t.isObject(e.get("listeners")))for(var i in e.get("listeners"))e.on(i,e.get("listeners")[i]);e.initialize(),e.fireEvent(e,"initialize",[e])},registerEvent:function(){for(var t=0;t<arguments.length;t++)this.events[arguments[t]]=[]},fireString:function(e,i,n,o){return e=this.fireEvent(e,i,n),t.isString(e)?e:!0!==e&&t.isDefined(e)?e.toString():o},fireEvent:function(t,e,i){var n=this.events[e].length;if(1==n)return this.events[e][0].apply(t,i);for(var o=!0,s=0;s<n;s++)this.events[e][s].apply(t,i)||(o=!1);return o},on:function(e,i){return t.isString(e)&&t.isArray(this.events[e])?this.events[e].push(i):t.isArray(e)&&e.each(function(t){this.on(t,i)},this),this},getPlugin:function(t){return this.constructor.plugin_[t]},set:function(e){t.isObject(e)&&t.merge(this.options,e)},pushIf:function(e,i){return t.isDefined(this.get(e))&&null!=this.get(e)?this.get(e):this.push(e,i)},push:function(t,e){for(var i=t.split("."),n=i.length-1,o=this.options,s=0;s<n;s++)o[i[s]]||(o[i[s]]={}),o=o[i[s]];return o[i[n]]=e},get:function(t){for(var t=t.split("."),e=this.options[t[0]],i=1;i<t.length;i++){if(!e)return null;e=e[t[i]]}return e}},t.Painter=t.extend(t.Element,{configure:function(){this.type="painter",this.dimension=t._2D,t.DefineAbstract("commonDraw",this),t.DefineAbstract("initialize",this),this.set({strokeStyle:"gray",padding:10,color:"black",offsetx:0,offsety:0,background_color:"#FEFEFE",color_factor:.15,style:"",border:{enable:!0},gradient:!1,gradient_mode:"LinearGradientUpDown",z_index:0,listeners:null,originx:null,originy:null}),this.variable.event={mouseover:!1},this.variable.animation={},this.registerEvent("click","mousemove","mouseover","mouseout","beforedraw","draw")},is3D:function(){return this.dimension==t._3D},applyGradient:function(t,e,i,n){var o=this._();o.get("gradient")&&o.get("f_color")&&(o.push("f_color",o.T.gradient(t||o.x||0,e||o.y||0,i||o.get(o.W),n||o.get(o.H),[o.get("dark_color"),o.get("light_color")],o.get("gradient_mode"))),o.push("light_color",o.T.gradient(t||o.x||0,e||o.y||0,i||o.get(o.W),n||o.get(o.H),[o.get("background_color"),o.get("light_color")],o.get("gradient_mode"))),o.push("f_color_",o.get("f_color")))},draw:function(t,e){if(e)this.root.draw(t);else{if(!this.fireEvent(this,"beforedraw",[this,t]))return this;this.commonDraw(this,t),this.fireEvent(this,"draw",[this,t])}},inject:function(t){t&&(this.root=t,this.target=this.T=t.T)},doConfig:function(){var e=this._(),i=t.parsePadding(e.get("padding")),n=(n=e.get("border.enable"))?t.parsePadding(e.get("border.width")):[0,0,0,0],o=t.toRgb(e.get("background_color")),s=e.get("color_factor"),a=e.get("gradient")?0:null;e.set({border_top:n[0],border_right:n[1],border_bottom:n[2],border_left:n[3],hborder:n[1]+n[3],vborder:n[0]+n[2],padding_top:i[0]+n[0],padding_right:i[1]+n[1],padding_bottom:i[2]+n[2],padding_left:i[3]+n[3],hpadding:i[1]+i[3]+n[1]+n[3],vpadding:i[0]+i[2]+n[0]+n[2]}),!0===e.get("shadow")&&e.push("shadow",{color:e.get("shadow_color"),blur:e.get("shadow_blur"),offsetx:e.get("shadow_offsetx"),offsety:e.get("shadow_offsety")}),e.push("f_color",o),e.push("f_color_",o),e.push("light_color",t.light(o,s,a)),e.push("dark_color",t.dark(o,.8*s,a)),e.push("light_color2",t.light(o,2*s,a)),e.is3D()&&!e.get("xAngle_")&&(i=t.vectorP2P(e.get("xAngle"),e.get("yAngle")),e.push("xAngle_",i.x),e.push("yAngle_",i.y))}}),t.Html=t.extend(t.Element,{configure:function(e){this.type="html",this.T=e,t.DefineAbstract("beforeshow",this),this.set({animation:!0,default_action:!0,width:0,height:0,style:"",index:999,offset_top:0,offset_left:0}),this.transitions=""},initialize:function(){var t=this._();t.wrap=t.get("wrap"),t.dom=document.createElement("div"),t.get("shadow")&&t.css("boxShadow",t.get("shadow_offsetx")+"px "+t.get("shadow_offsety")+"px "+t.get("shadow_blur")+"px "+t.get("shadow_color")),t.get("border.enable")&&(t.css("border",t.get("border.width")+"px "+t.get("border.style")+" "+t.get("border.color")),t.css("borderRadius",t.get("border.radius")+"px")),t.css("position","absolute"),t.css("zIndex",t.get("index")),t.applyStyle(),t.wrap.appendChild(t.dom),t.style=t.dom.style,t.get("default_action")&&t.doAction(t)},width:function(){return this.dom.offsetWidth},height:function(){return this.dom.offsetHeight},onTransitionEnd:function(e,i){var n="transitionend";t.isWebKit?n="webkitTransitionEnd":t.isOpera&&(n="oTransitionEnd"),t.Event.addEvent(this.dom,n,e,i)},destroy:function(){this.wrap.removeChild(this.dom),this.dom=null},transition:function(e){this.transitions=""==this.transitions?e:this.transitions+","+e,t.isWebKit?this.css("WebkitTransition",this.transitions):t.isGecko?this.css("MozTransition",this.transitions):t.isOpera?this.css("OTransition",this.transitions):this.css("transition",this.transitions)},beforeshow:function(t,e,i){i.follow(t,e,i)},show:function(t,e){this.beforeshow(t,e,this),this.css("visibility","visible"),this.get("animation")&&this.css("opacity",1)},hidden:function(){this.css("visibility","hidden")},getDom:function(){return this.dom},css:function(e,i){if(t.isString(e)){if(!t.isDefined(i))return this.dom.style[e];this.dom.style[e]=i}},applyStyle:function(){for(var t,e=this.get("style").split(";"),i=0;i<e.length;i++)1<(t=e[i].split(":")).length&&this.css(t[0],t[1])}}),t.Component=t.extend(t.Painter,{configure:function(e){t.Component.superclass.configure.apply(this,arguments),this.type="component",this.set({fontsize:12,font:"Verdana",fontweight:"normal",fontunit:"px",tip:{enable:!1,border:{width:2}}}),this.ICHARTJS_CHART=this.proxy=this.atomic=!1,this.inject(e)},initialize:function(){t.DefineAbstract("isEventValid",this),t.DefineAbstract("doDraw",this),this.doConfig(),this.initialization=!0},getDimension:function(){return{x:this.x,y:this.y,width:this.get("width"),height:this.get("height")}},destroy:function(){this.tip&&this.tip.destroy()},doConfig:function(){t.Component.superclass.doConfig.call(this);var e=this._(),i=e.get(e.W),n=e.get("maxwidth"),o=e.get(e.X);if(i&&n&&((i=e.push(e.W,t.parsePercent(i,n)))>n&&(i=e.push("width",n)),n>i)){var s=e.get("align")||e.C;s==e.C?o+=(n-i)/2:s==e.R&&(o+=n-i)}e.x=e.push(e.X,o+e.get("offsetx")),e.y=e.push(e.Y,e.get(e.Y)+e.get("offsety")),e.push("fontStyle",t.getFont(e.get("fontweight"),e.get("fontsize"),e.get("font"),e.get("fontunit"))),e.data=e.get("data"),e.get("tip.enable")&&(e.pushIf("tip.border.color",e.get("f_color")),t.isFunction(e.get("tip.invokeOffset"))||e.push("tip.invokeOffset",e.tipInvoke()))},isMouseOver:function(t){return this.isEventValid(t,this)},redraw:function(t){this.root.draw(t,this.root.Combination)},last:t.emptyFn,commonDraw:function(t){t.proxy||t.doDraw.call(t,t)}}),t.Tip=t.extend(t.Html,{configure:function(){t.Tip.superclass.configure.apply(this,arguments),this.type="tip",this.set({name:"",index:0,value:"",text:"",showType:"follow",invokeOffset:null,fade_duration:300,move_duration:100,timing_function:"ease-out",invokeOffsetDynamic:!1,style:"textAlign:left;padding:4px 5px;cursor:pointer;backgroundColor:rgba(239,239,239,.85);fontSize:12px;color:black;",border:{enable:!0,radius:5},delay:200}),this.registerEvent("parseText")},position:function(t,e,i){i.style.top=(0>t?0:t)+"px",i.style.left=(0>e?0:e)+"px"},follow:function(e,i,n){n.get("invokeOffsetDynamic")?i.hit&&((t.isString(i.text)||t.isNumber(i.text))&&n.text(i.name,i.value,i.text,i.i,n),e=n.get("invokeOffset")(n.width(),n.height(),i),n.position(e.top,e.left,n)):"follow"!=n.get("showType")&&t.isFunction(n.get("invokeOffset"))?(e=n.get("invokeOffset")(n.width(),n.height(),i),n.position(e.top,e.left,n)):n.position(e.y-1.1*n.height()-2,e.x+2,n)},text:function(t,e,i,n,o){o.dom.innerHTML=o.fireString(o,"parseText",[o,t,e,i,n],i)},hidden:function(){this.get("animation")?this.css("opacity",0):this.css("visibility","hidden")},doAction:function(t){t.T.on("mouseover",function(e,i,n){t.show(i,n)}).on("mouseout",function(e,i){t.hidden(i)}),"follow"==t.get("showType")&&t.T.on("mousemove",function(e,i,n){t.T.variable.event.mouseover&&setTimeout(function(){t.T.variable.event.mouseover&&t.follow(i,n,t)},t.get("delay"))})},initialize:function(){t.Tip.superclass.initialize.call(this);var e=this._();if(e.text(e.get("name"),e.get("value"),e.get("text"),e.get("index"),e),e.hidden(),e.get("animation")){var i=e.get("move_duration")/1e3+"s "+e.get("timing_function")+" 0s";e.transition("opacity "+e.get("fade_duration")/1e3+"s "+e.get("timing_function")+" 0s"),e.transition("top "+i),e.transition("left "+i),e.onTransitionEnd(function(){0==e.css("opacity")&&e.css("visibility","hidden")},!1)}}}),t.CrossHair=t.extend(t.Html,{configure:function(){t.CrossHair.superclass.configure.apply(this,arguments),this.type="crosshair",this.set({top:0,left:0,hcross:!0,vcross:!0,invokeOffset:null,line_width:1,line_color:"#1A1A1A",delay:200})},follow:function(t,e,i){i.get("invokeOffset")?(t=i.get("invokeOffset")(t,e))&&t.hit?(i.o_valid=!0,i.position(t.top-i.top,t.left-i.left,i)):(!t||!i.o_valid)&&i.position(i.owidth,i.oheight,i):i.position(t.y-i.top-1,t.x-i.left-1,i)},position:function(t,e,i){i.horizontal.style.top=t-i.size+"px",i.vertical.style.left=e-i.size+"px"},doCreate:function(e,i,n){var o=document.createElement("div");return o.style.width=t.toPixel(i),o.style.height=t.toPixel(n),o.style.backgroundColor=e.get("line_color"),o.style.position="absolute",e.dom.appendChild(o),o},doAction:function(t){t.T.on("mouseover",function(e,i,n){t.show(i,n)}).on("mouseout",function(e,i,n){t.hidden(i,n)}).on("mousemove",function(e,i,n){t.follow(i,n,t)})},initialize:function(){t.CrossHair.superclass.initialize.call(this);var e=this._(),i=t.toPixel(e.get("line_width"));e.size=e.get("line_width")/2,e.top=t.fixPixel(e.get(e.O)),e.left=t.fixPixel(e.get(e.L)),e.owidth=-e.T.root.width,e.oheight=-e.T.root.height,e.o_valid=!1,e.css("width","0px"),e.css("height","0px"),e.css("top",e.top+"px"),e.css("left",e.left+"px"),e.css("visibility","hidden"),e.horizontal=e.doCreate(e,e.get("hcross")?t.toPixel(e.get(e.W)):"0px",i),e.vertical=e.doCreate(e,i,e.get("vcross")?t.toPixel(e.get(e.H)):"0px")}}),t.Legend=t.extend(t.Component,{configure:function(){t.Legend.superclass.configure.apply(this,arguments),this.type="legend",this.set({data:void 0,width:"auto",column:1,row:"max",maxwidth:0,line_height:16,sign:"square",sign_size:10,sign_space:5,legend_space:5,z_index:1009,text_with_sign_color:!1,align:"right",valign:"middle"}),this.atomic=!0,this.registerEvent("parse")},isEventValid:function(t,e){var i={valid:!1};return t.x>this.x&&t.x<e.x+e.width&&t.y>e.y&&t.y<e.y+e.height&&e.data.each(function(n,o){if(t.x>n.x&&t.x<n.x+n.width_+e.get("signwidth")&&t.y>n.y&&t.y<n.y+e.get("line_height"))return i={valid:!0,index:o,target:n},!1},e),i},drawCell:function(t,e,i,n,o,s){var a=s.get("sign_size"),r=s.getPlugin("sign");r&&r.call(s,s.T,o,{x:t+a/2,y:e},a,n)||(-1!=o.indexOf("bar")&&s.T.box(t,e-a/12,a,a/6,0,n),"round"==o?s.T.round(t+a/2,e,a/2,n):"round-bar"==o?s.T.round(t+a/2,e,a/4,n):"square-bar"==o?s.T.box(t+a/4,e-a/4,a/2,a/2,0,n):"square"==o&&s.T.box(t,e-a/2,a,a,0,n)),s.T.fillText(i,t+s.get("signwidth"),e,0,s.get("text_with_sign_color")?n:s.get("color"),"lr",s.get("line_height"))},doDraw:function(e){e.T.box(e.x,e.y,e.width,e.height,e.get("border"),e.get("f_color"),!1,e.get("shadow")),e.T.textStyle(e.L,"middle",t.getFont(e.get("fontweight"),e.get("fontsize"),e.get("font"))),e.data.each(function(t){e.drawCell(t.x,t.y,t.text,t.color,t.sign,e)})},doLayout:function(e,i){var n=e.get("sign_size"),o=0,s=0,a=0,r=e.get("column"),l=e.get("row"),c=e.data.length;e.T.textFont(e.get("fontStyle")),e.get("line_height")<n&&e.push("line_height",n+n/5),e.push("signwidth",n+e.get("sign_space")),e.data.each(function(t){t.width_=e.T.measureText(t.text)},e);for(var u=0;u<r;u++){for(var a=0,h=u;h<c;h+=r)a=Math.max(a,e.data[h].width_);e.columnwidth[u]=a,o+=a}for(u=0;u<l;u++){for(a=0,h=u*r;h<c;h++)a=Math.max(a,e.data[h].text.split("\n").length);e.columnheight[u]=a,s+=a}if((o=e.push(e.W,o+e.get("hpadding")+e.get("signwidth")*r+(r-1)*e.get("legend_space")))>e.get("maxwidth")&&!(10>(n=Math.floor(e.get("fontsize")*(e.get("maxwidth")/o)))&&1==r))return 9<n?e.push("fontStyle",t.getFont(e.get("fontweight"),e.push("fontsize",n),e.get("font"))):1<r&&e.push("row",Math.ceil(c/e.push("column",r-1))),void e.doLayout(e,i);var g;for(e.width=o,e.height=s=e.push(e.H,s*e.get("line_height")+e.get("vpadding")),e.y=e.get("valign")==e.O?i.get("t_originy"):e.get("valign")==e.B?i.get("b_originy")-s:i.get("centery")-s/2,e.x=e.get("align")==e.L?i.get("l_originx"):e.get("align")==e.C?i.get("centerx")-o/2:i.get("r_originx")-o,e.x=e.push(e.X,(0>e.x?i.get("l_originx"):e.x)+e.get("offsetx")),e.y=e.push(e.Y,(0>e.y?i.get("t_originy"):e.y)+e.get("offsety")),a=e.y+e.get("padding_top"),n=e.get("legend_space")+e.get("signwidth"),u=0;u<l;u++){for(s=e.x+e.get("padding_left"),a+=g=e.columnheight[u]/2*e.get("line_height"),h=0;h<r&&u*r+h<c;h++)o=e.data[u*r+h],o.y=a,o.x=s,s+=e.columnwidth[h]+n;a+=g}},doConfig:function(){t.Legend.superclass.doConfig.call(this);var e=this._(),i=e.root,n=t.isNumber(e.get("column")),o=t.isNumber(e.get("row")),s=e.data.length;e.get("align")==e.C&&"middle"==e.get("valign")&&e.push("valign",e.O),i.get("align")==e.L&&"middle"==e.get("valign")&&e.push("align",e.R),e.data.each(function(i,n){t.merge(i,e.fireEvent(e,"parse",[e,i.name,n])),i.text=i.text||i.name||"",i.sign=i.sign||e.get("sign")},e),!n&&!o&&(n=e.push("column",1)),n&&!o&&(o=e.push("row",Math.ceil(s/e.get("column")))),!n&&o&&(n=e.push("column",Math.ceil(s/e.get("row")))),n=e.get("column"),s>(o=e.get("row"))*n&&(o+=Math.ceil((s-o*n)/n),o=e.push("row",o)),e.columnwidth=[],e.columnheight=[],e.doLayout(e,i)}}),t.Label=t.extend(t.Component,{configure:function(){t.Label.superclass.configure.apply(this,arguments),this.type="label",this.set({text:"",line_height:12,line_thickness:1,sign:"square",sign_size:12,padding:"2 5",offsety:2,sign_space:5,background_color:"#efefef",text_with_sign_color:!1}),this.atomic=!0,this.registerEvent()},isEventValid:function(e,i){return{valid:t.inRange(i.labelx,i.labelx+i.get(i.W),e.x)&&t.inRange(i.labely,i.labely+i.get(i.H),e.y)}},text:function(t){t&&this.push("text",t),this.push(this.W,this.T.measureText(this.get("text"))+this.get("hpadding")+this.get("sign_size")+this.get("sign_space"))},localizer:function(t){var e=t.get("quadrantd"),i=t.get("line_points"),n=t.get("smooth"),e=1<=e&&2>=e,o=t.get("labelx"),s=t.get("labely");t.labelx=o+(e?-t.get(t.W)-n:n),t.labely=s-t.get(t.H)/2,i[2]={x:o,y:s},i[3]={x:i[2].x+(e?-n:n),y:i[2].y}},doLayout:function(t,e,i,n){n.push("labelx",n.get("labelx")+t/i),n.push("labely",n.get("labely")+e/i),n.get("line_points").each(function(i,n){return i.x+=t,i.y+=e,1==n},n),n.localizer(n)},doDraw:function(t){var e=t.get("line_points"),i=t.get("sign_size"),n=t.labelx+t.get("padding_left"),o=t.labely+t.get("padding_top");t.T.label(e,t.get("line_thickness"),t.get("border.color")),t.T.box(t.labelx,t.labely,t.get(t.W),t.get(t.H),t.get("border"),t.get("f_color"),!1,t.get("shadow")),t.T.textStyle(t.L,t.O,t.get("fontStyle")),e=t.get("color"),t.get("text_with_sign_color")&&(e=t.get("scolor")),"square"==t.get("sign")?t.T.box(n,o,i,i,0,t.get("scolor")):t.get("sign")&&t.T.round(n+i/2,o+i/2,i/2,t.get("scolor")),t.T.fillText(t.get("text"),n+i+t.get("sign_space"),o,t.get("textwidth"),e)},doConfig:function(){t.Label.superclass.doConfig.call(this);var e=this._();e.T.textFont(e.get("fontStyle")),e.get("fontsize")>e.get("line_height")&&e.push("line_height",e.get("fontsize")),e.get("sign")||(e.push("sign_size",0),e.push("sign_space",0)),e.push(e.H,e.get("line_height")+e.get("vpadding")),e.text(),e.localizer(e)}}),t.Text=t.extend(t.Component,{configure:function(){t.Text.superclass.configure.apply(this,arguments),this.type="text",this.set({text:"",textAlign:"center",align:"center",background_color:0,textBaseline:"top",border:{enable:!1},width:0,height:0,padding:0,writingmode:"lr",line_height:16,rotate:0}),this.registerEvent()},doDraw:function(t){t.get("box_feature")&&t.T.box(t.x,t.y,t.get(t.W),t.get(t.H),t.get("border"),t.get("f_color")),t.T.text(t.get("text"),t.get("textx"),t.get("texty"),t.get(t.W)-t.get("hpadding"),t.get("color"),t.get("textAlign"),t.get("textBaseline"),t.get("fontStyle"),t.get("writingmode"),t.get("line_height"),t.get("shadow"),t.get("rotate"))},isEventValid:function(){return{valid:!1}},doLayout:function(t,e,i,n){n.x=n.push(n.X,n.x+t),n.y=n.push(n.Y,n.y+e),n.push("textx",n.get("textx")+t),n.push("texty",n.get("texty")+e)},doConfig:function(){t.Text.superclass.doConfig.call(this);var e=this._(),i=e.x,n=e.y+e.get("padding_top"),o=e.get(e.W),s=e.get(e.H),a=e.get("textAlign"),i=i+(a==e.C?o/2:a==e.R?o-e.get("padding_right"):e.get("padding_left"));s&&(n+=s/2,e.push("textBaseline","middle")),e.push("textx",i),e.push("texty",n),e.push("box_feature",o&&s),e.applyGradient()}}),function(t){function e(e){if("string"==typeof e&&(e=t(e)),!e||!e.tagName||"canvas"!=e.tagName.toLowerCase())throw Error("there not a canvas element");this.canvas=e,this.c=this.canvas.getContext("2d")}var i=Math.PI,n=i/90,o=n/2,s=Math.ceil,a=Math.floor,r=2*i,l=Math.max,c=Math.min,u=Math.sin,h=Math.cos,g=function(t,e){return 1==t?a(e)+.5:Math.round(e)},d=function(t,e,i,n){var o,s,a=e.x,r=e.y,u=t[i-1],h=t[i+1];if(i<t.length-1){var g,t=u.y,i=h.y;o=(n*a+u.x)/(n+1),s=(n*r+t)/(n+1),h=(n*a+h.x)/(n+1),n=(n*r+i)/(n+1),n+=g=(n-s)*(h-a)/(h-o)+r-n,(s+=g)>t&&s>r?(s=l(t,r),n=2*r-s):s<t&&s<r&&(s=c(t,r),n=2*r-s),n>i&&n>r?(n=l(i,r),s=2*r-n):n<i&&n<r&&(n=c(i,r),s=2*r-n),e.rcx=h,e.rcy=n}return[u.rcx||u.x,u.rcy||u.y,o||a,s||r,a,r]},p=function(e){return t.isNumber(e)?e:t.parseFloat(e,e)},f=function(e,i){var n,o,s=0,a=0,r=!1,u=i.get("labels");if(i.data=e,"simple"==i.dataType)i.total=0,e.each(function(e){if(e.background_color=e.color,s=e.value||0,t.isArray(s)){var u=0;a=s.length>a?s.length:a;for(var h=0;h<s.length;h++)s[h]=p(s[h]),u+=s[h],r||(n=o=s[h],r=!0),n=l(s[h],n),o=c(s[h],o);e.total=u}else s=p(s),e.value=s,i.total+=s,r||(n=o=s,r=!0),n=l(s,n),o=c(s,o)},i),t.isArray(u)&&(a=u.length>a?u.length:a),i.push("maxItemSize",a);else if("stacked"==i.dataType||"complex"==i.dataType){var h,g,d,f=u.length,y="stacked"==i.dataType;if(0==f)for(var f=e[0].value.length,x=0;x<f;x++)u.push("");for(i.columns=[],x=0;x<f;x++)h=[],g=0,e.each(function(i,a){(s=i.value[x])&&(i.value[x]=s=p(s),g+=s,y?d=e[a].color:(d=i.color,r||(n=o=s,r=!0),n=l(s,n),o=c(s,o)),h.push(t.applyIf({name:i.name,value:i.value[x],background_color:d,color:d},t.isArray(i.extra)?i.extra[x]||{}:i)))}),y&&(r||(n=o=s,r=!0),n=l(g,n),o=c(g,o)),i.columns.push({total:g,name:u[x],item:h})}i.push("minValue",o),i.push("maxValue",n),i.doConfig(),i.initialization=!0};e.prototype={getContext:function(){return this.c},css:function(e,i){if(!t.isDefined(i))return this.canvas.style[e];this.canvas.style[e]=i},ellipse:function(t,e,i,o,s,a,r,l,c,g,d,p,f,y){for(f=!!f,this.save().gCo(y).strokeStyle(l,c,g).shadowOn(d).fillStyle(r).moveTo(t,e).beginPath(),f&&this.moveTo(t,e);s<=a;)this.lineTo(t+i*h(s),e+o*u(s)),s+=n;return this.lineTo(t+i*h(a),e+o*u(a)).closePath().stroke(l).fill(r).restore()},arc:function(t,e,i,n,o,s,r,l,c,g,d,p,f,y){return l&&(i-=a(c/2)),0>=i?this:(this.save().gCo(y).strokeStyle(l,c,g).fillStyle(r).beginPath(),n?(this.moveTo(t+h(o)*(i-n),e+u(o)*(i-n)).lineTo(t+h(o)*i,e+u(o)*i),this.c.arc(t,e,i,o,s,p),this.lineTo(t+h(s)*(i-n),e+u(s)*(i-n)),this.c.arc(t,e,i-n,s,o,!p)):(this.c.arc(t,e,i,o,s,p),f&&this.lineTo(t,e)),this.closePath(),l?this.shadowOn(d).stroke(l).shadowOff().fill(r):this.shadowOn(d).fill(r),this.restore())},sector:function(t,e,i,n,o,s,a,r,l,c,u,h,g,d){return u&&this.arc(t,e,i,n,o,s,a,r,l,c,u,h,!g,!d),this.arc(t,e,i,n,o,s,a,r,l,c,!1,h,!g)},sector3D:function(){var e=function(e,i,o,s,a,r,l,c,g){var l=function(t,n){this.lineTo(e+o*h(t),i+(n||0)+s*u(t))},d=a;for(this.fillStyle(t.dark(g)).moveTo(e+o*h(a),i+s*u(a)).beginPath();d<=r;)l.call(this,d),d+=n;for(l.call(this,r),this.lineTo(e+o*h(r),i+c+s*u(r)),d=r;d>=a;)l.call(this,d,c),d-=n;l.call(this,a,c),this.lineTo(e+o*h(a),i+s*u(a)).closePath().fill(!0)},i=function(t,e,i,n,o,s,a,r){i=t+i*h(a),n=e+s+n*u(a),this.moveTo(t,e).beginPath().fillStyle(r).lineTo(t,e+s).lineTo(i,n).lineTo(i,n-s).lineTo(t,e).closePath().fill(!0)},o=function(e,n,o,s,a,r,l,c,u){var h=t.quadrantd(a),g=t.quadrantd(r),u=t.dark(u);(1==h||2==h)&&i.call(this,e,n,o,s,l,c,a,u),(0==g||3==g)&&i.call(this,e,n,o,s,l,c,r,u)},s=function(t,i,n,s,a,r,l,c,u,h,g,d,p){return this.ellipse(t,i+l,n,s,a,r,c,u,h,g,d,p,!0),o.call(this,t,i,n,s,a,r,p,l,c),this.ellipse(t,i,n,s,a,r,c,u,h,g,!1,p,!0),e.call(this,t,i,n,s,a,r,p,l,c),this};return s.layerPaint=o,s.sPaint=e,s.layerDraw=i,s}(),textStyle:function(t,e,i){return this.textAlign(t).textBaseline(e).textFont(i)},strokeStyle:function(t,e,i,n){return t&&(e&&(this.c.lineWidth=e),i&&(this.c.strokeStyle=i),n)&&(this.c.lineJoin=n),this},globalAlpha:function(t){return t&&(this.c.globalAlpha=t),this},fillStyle:function(t){return t&&(this.c.fillStyle=t),this},arc2:function(t,e,i,n,o,s){return i&&this.c.arc(t,e,i,n,o,s),this},textAlign:function(t){return t&&(this.c.textAlign=t),this},textBaseline:function(t){return t&&(this.c.textBaseline=t),this},textFont:function(t){return t&&(this.c.font=t),this},shadowOn:function(t){return t&&(this.c.shadowColor=t.color,this.c.shadowBlur=t.blur,this.c.shadowOffsetX=t.offsetx,this.c.shadowOffsetY=t.offsety),this},shadowOff:function(){return this.c.shadowColor="white",this.c.shadowBlur=this.c.shadowOffsetX=this.c.shadowOffsetY=0,this},gradient:function(t,e,i,n,o,s,a){var r=t,l=e,c=!(s=s.toLowerCase()).indexOf("linear"),s=s.substring(14);if(c){switch(s){case"updown":l+=n;break;case"downup":e+=n;break;case"leftright":r+=i;break;case"rightleft":t+=i;break;default:return o[0]}return this.avgLinearGradient(t,e,r,l,o)}return t+=i/2,e+=n/2,this.avgRadialGradient(t,e,a||0,t,e,i>n?n:i,"outin"==s?o.reverse():o)},avgLinearGradient:function(t,e,i,n,o){for(t=this.createLinearGradient(t,e,i,n),e=0;e<o.length;e++)t.addColorStop(e/(o.length-1),o[e]);return t},createLinearGradient:function(t,e,i,n){return this.c.createLinearGradient(t,e,i,n)},avgRadialGradient:function(t,e,i,n,o,s,a){for(t=this.createRadialGradient(t,e,i,n,o,s),e=0;e<a.length;e++)t.addColorStop(e/(a.length-1),a[e]);return t},createRadialGradient:function(t,e,i,n,o,s){return this.c.createRadialGradient(t,e,i,n,o,s)},text:function(t,e,i,n,o,s,a,r,l,c,u,h){return this.save().textStyle(s,a,r).fillText(t,e,i,n,o,l,c,u,h).restore()},fillText:function(t,e,i,n,s,a,r,l,c){return(t=t.toString())&&t.length?(n=n||!1,a=a||"lr",r=r||16,e=g(0,e),i=g(0,i),1<(t=t.split("tb"==a?"":"\n")).length&&("middle"==this.c.textBaseline?i-=(t.length-1)*r/2:"bottom"==this.c.textBaseline&&(i-=(t.length-1)*r)),this.save().fillStyle(s).translate(e,i).rotate(o*c).shadowOn(l),t.each(function(t,o){try{n&&0<n?this.c.fillText(t,0,o*r,n):this.c.fillText(t,0,o*r)}catch(n){console.log(n.message+"["+t+","+e+","+i+"]")}},this),this.restore()):this},measureText:function(t){var e=0;return(t=t.split("\n")).each(function(t){e=l(this.measureText(t).width,e)},this.c),e},moveTo:function(t,e){return this.c.moveTo(t||0,e||0),this},lineTo:function(t,e){return this.c.lineTo(t||0,e||0),this},save:function(){return this.c.save(),this},restore:function(){return this.c.restore(),this},beginPath:function(){return this.c.beginPath(),this},closePath:function(){return this.c.closePath(),this},stroke:function(t){return t&&this.c.stroke(),this},fill:function(t){return t&&this.c.fill(),this},cube:function(e,i,n,o,s,a,r,l,c,u,h,d){return e=g(u,e),i=g(u,i),r=r&&0<r?r:s,o=i-r*o,n=g(u,e+r*n),o=g(u,o),d&&(this.polygon(l,c,u,h,d,!1,[{x:e,y:i},{x:n,y:o},{x:n+s,y:o},{x:e+s,y:i}]),this.polygon(l,c,u,h,d,!1,[{x:e,y:i},{x:e,y:i+a},{x:e+s,y:i+a},{x:e+s,y:i}]),this.polygon(l,c,u,h,d,!1,[{x:e+s,y:i},{x:n+s,y:o},{x:n+s,y:o+a},{x:e+s,y:i+a}])),this.polygon(t.dark(l),c,u,h,!1,!1,[{x:e,y:i},{x:n,y:o},{x:n+s,y:o},{x:e+s,y:i}]),this.polygon(l,c,u,h,!1,!1,[{x:e,y:i},{x:e,y:i+a},{x:e+s,y:i+a},{x:e+s,y:i}]),this.polygon(t.dark(l),c,u,h,!1,!1,[{x:e+s,y:i},{x:n+s,y:o},{x:n+s,y:o+a},{x:e+s,y:i+a}]),this},cube3D:function(e,i,n,o,s,a,r,l,c,u,h,d){for(e=g(u,e),i=g(u,i),l=l&&0!=l?l:a,s?(o=t.vectorP2P(n,o),n=e+l*o.x,o=i-l*o.y):(n=e+l*n,o=i-l*o);6>d.length;)d.push(!1);return n=g(u,n),o=g(u,o),l=[],0>o?t.isObject(d[4])&&l.push(t.applyIf({points:[{x:e,y:i-r},{x:n,y:o-r},{x:n+a,y:o-r},{x:e+a,y:i-r}]},d[4])):t.isObject(d[0])&&l.push(t.applyIf({points:[{x:e,y:i},{x:n,y:o},{x:n+a,y:o},{x:e+a,y:i}]},d[0])),t.isObject(d[1])&&l.push(t.applyIf({points:[{x:n,y:o},{x:n,y:o-r},{x:n+a,y:o-r},{x:n+a,y:o}]},d[1])),t.isObject(d[2])&&l.push(t.applyIf({points:[{x:e,y:i},{x:e,y:i-r},{x:n,y:o-r},{x:n,y:o}]},d[2])),t.isObject(d[3])&&l.push(t.applyIf({points:[{x:e+a,y:i},{x:e+a,y:i-r},{x:n+a,y:o-r},{x:n+a,y:o}]},d[3])),0>o?t.isObject(d[0])&&l.push(t.applyIf({points:[{x:e,y:i},{x:n,y:o},{x:n+a,y:o},{x:e+a,y:i}]},d[0])):t.isObject(d[4])&&l.push(t.applyIf({points:[{x:e,y:i-r},{x:n,y:o-r},{x:n+a,y:o-r},{x:e+a,y:i-r}]},d[4])),t.isObject(d[5])&&l.push(t.applyIf({points:[{x:e,y:i},{x:e,y:i-r},{x:e+a,y:i-r},{x:e+a,y:i}]},d[5])),l.each(function(t){this.polygon(t.color,c,u,h,t.shadow,t.alpha,t.points)},this),this},polygon:function(t,e,i,n,o,s,a,r,l,c){if(this.save().strokeStyle(e,i,n).beginPath().fillStyle(t).globalAlpha(s).shadowOn(o).moveTo(a[0].x,a[0].y),r){for(this.moveTo(g(i,c[0].x),g(i,c[0].y)).lineTo(g(i,a[0].x),g(i,a[0].y)),n=1;n<a.length;n++)this.bezierCurveTo(d(a,a[n],n,l));this.lineTo(g(i,c[1].x),g(i,c[1].y))}else for(n=1;n<a.length;n++)this.lineTo(g(i,a[n].x),g(i,a[n].y));return this.closePath().stroke(e).fill(t).restore()},lines:function(t,e,i,n){if(!e)return this;for(this.save().gCo(n).beginPath().strokeStyle(!0,e,i).moveTo(g(e,t[0]),g(e,t[1])),i=2;i<t.length-1;i+=2)this.lineTo(g(e,t[i]),g(e,t[i+1]));return this.stroke(!0).restore()},bezierCurveTo:function(t){return this.c.bezierCurveTo(t[0],t[1],t[2],t[3],t[4],t[5]),this},label:function(t,e,i){return this.save().beginPath().strokeStyle(!0,e,i).moveTo(g(e,t[0].x),g(e,t[0].y)).bezierCurveTo([t[1].x,t[1].y,t[2].x,t[2].y,t[3].x,t[3].y]).stroke(!0).restore()},lineArray:function(t,e,i,n,o){if(!e)return this;for(this.save().beginPath().strokeStyle(!0,e,i).moveTo(g(e,t[0].x),g(e,t[0].y)),i=1;i<t.length;i++)n?this.bezierCurveTo(d(t,t[i],i,o||1.5)):this.lineTo(g(e,t[i].x),g(e,t[i].y));return this.stroke(!0).restore()},dotted:function(e,i,n,o,s,r,l,c,u){if(!s)return this;var h,e=g(s,e),i=g(s,i),n=g(s,n),o=g(s,o),d=t.distanceP2P(e,i,n,o);if(0>=l||d<=l||e!=n&&i!=o)return this.line(e,i,n,o,s,r,u);for((e>n||i>o)&&(h=e,e=n,n=h,h=i,i=o,o=h),this.save().gCo(u).strokeStyle(!0,s,r).beginPath().moveTo(e,i),s=l*(c||1),c=i==o,r=(d=d-(r=a(d/(l+s)))*(l+s)>l)?r+1:r,u=1;u<=r;u++)this.lineTo(c?e+l*u+s*(u-1):e,c?i:i+l*u+s*(u-1)).moveTo(c?e+(l+s)*u:e,c?i:i+(l+s)*u);return d||this.lineTo(n,o),this.stroke(!0).restore()},line:function(t,e,i,n,o,s,a){return o?(this.save().gCo(a),this.beginPath().strokeStyle(!0,o,s).moveTo(g(o,t),g(o,e)).lineTo(g(o,i),g(o,n)).stroke(!0).restore()):this},round:function(t,e,i,n,o,s){return this.arc(t,e,i,0,0,r,n,!!s,o,s)},round0:function(t,e,i,n,o){return this.arc(t.x,t.y,e,0,0,r,i,!!o,n,o)},fillRect:function(t,e,i,n){return this.c.fillRect(t,e,i,n),this},translate:function(t,e){return this.c.translate(t,e),this},rotate:function(t){return this.c.rotate(t),this},clearRect:function(t,e,i,n){return i=i||this.canvas.width,n=n||this.canvas.height,this.c.clearRect(t||0,e||0,i,n),this},gCo:function(t){return t?this.gCO(t):this},gCO:function(t){return this.c.globalCompositeOperation=t?"destination-over":"source-over",this},box:function(e,n,o,l,c,u,h,d,p){if((c=c||{enable:0}).enable){var f=c.width,y=c.color,x=c.radius,_=t.isNumber(f);(f=t.parsePadding(f))[0]==f[1]&&f[1]==f[2]&&f[2]==f[3]&&(_=!0),o+=(d=d?1:-1)*(f[1]+f[3])/2,l+=d*(f[0]+f[2])/2,e-=d*(f[3]/2),n-=d*(f[0]/2),f=_?f[0]:f,x=_&&x&&0!=x&&"0"!=x?t.parsePadding(x):0}return this.save().gCo(p).fillStyle(u).strokeStyle(_,f,y),x?this.beginPath().moveTo(g(f,e+x[0]),g(f,n)).lineTo(g(f,e+o-x[1]),g(f,n)).arc2(g(f,e+o-x[1]),g(f,n+x[1]),x[1],3*i/2,r).lineTo(g(f,e+o),g(f,n+l-x[2])).arc2(g(f,e+o-x[2]),g(f,n+l-x[2]),x[2],0,i/2).lineTo(g(f,e+x[3]),g(f,n+l)).arc2(g(f,e+x[3]),g(f,n+l-x[3]),x[3],i/2,i).lineTo(g(f,e),g(f,n+x[0])).arc2(g(f,e+x[0]),g(f,n+x[0]),x[0],i,3*i/2).closePath().shadowOn(h).stroke(f).shadowOff().fill(u):!c.enable||_?(f&&c.enable&&(this.shadowOn(h).c.strokeRect(e,n,o,l),this.shadowOff()),u&&this.fillRect(e,n,o,l)):(f&&(y=t.isArray(y)?y:[y,y,y,y],this.shadowOn(h).line(e+o,n+f[0]/2,e+o,n+l-f[0]/2,f[1],y[1],0).line(e,n+f[0]/2,e,n+l-f[0]/2,f[3],y[3],0).line(a(e-f[3]/2),n,e+o+f[1]/2,n,f[0],y[0],0).line(a(e-f[3]/2),n+l,e+o+f[1]/2,n+l,f[2],y[2],0).shadowOff()),u&&this.beginPath().moveTo(a(e+f[3]/2),a(n+f[0]/2)).lineTo(s(e+o-f[1]/2),n+f[0]/2).lineTo(s(e+o-f[1]/2),s(n+l-f[2]/2)).lineTo(a(e+f[3]/2),s(n+l-f[2]/2)).lineTo(a(e+f[3]/2),a(n+f[0]/2)).closePath().fill(u)),this.restore()},toDataURL:function(t){return this.canvas.toDataURL(t||"image/png")},addEvent:function(e,i,n){t.Event.addEvent(this.canvas,e,i,n)}},t.taylor={light:function(t,e){e.highlight=!1,t.on("mouseover",function(){e.highlight=!0,t.redraw("mouseover")}).on("mouseout",function(){e.highlight=!1,t.redraw("mouseout")}).on("beforedraw",function(){return t.push("f_color",e.highlight?t.get("light_color"):t.get("f_color_")),!0})}},t.Chart=t.extend(t.Painter,{configure:function(){t.Chart.superclass.configure.apply(this,arguments),this.type="chart",this.dataType="simple",this.set({id:"",render:"",data:[],width:void 0,height:void 0,lineJoin:"round",align:"center",default_mouseover_css:!0,turn_off_touchmove:!1,showpercent:!1,decimalsnum:1,title:{text:"",fontweight:"bold",fontsize:20,height:30},subtitle:{text:"",fontweight:"bold",fontsize:16,height:20},footnote:{text:"",color:"#5d7f97",textAlign:"right",height:20},animation:!1,doAnimation:null,animation_timing_function:"easeInOut",animation_duration:1e3,z_index:999,legend:{enable:!1},tip:{enable:!1}}),this.registerEvent("beforeAnimation","afterAnimation","resize","animating"),this.T=null,this.show=this.Animationed=this.Combination=this.Rendered=!1,this.data=[],this.plugins=[],this.components=[],this.oneways=[],this.total=0,this.ICHARTJS_CHART=!0},toDataURL:function(t){return this.T.toDataURL(t)},segmentRect:function(){this.Combination||this.T.clearRect()},resetCanvas:function(){this.Combination||this.T.box(this.get("l_originx"),this.get("t_originy"),this.get("client_width"),this.get("client_height"),0,this.get("f_color"),0,0,!0)},animation:function(e){e.segmentRect(),e.coo&&!e.ILLUSIVE_COO&&e.coo.draw(),e.doAnimation(e.variable.animation.time,e.duration,e),e.plugins.each(function(t){t.A_draw&&(t.variable.animation.animating=!0,t.variable.animation.time=e.variable.animation.time,t.draw(),t.variable.animation.animating=!1)}),e.Combination||(e.oneways.each(function(t){t.draw()}),e.variable.animation.time<e.duration?(e.variable.animation.time++,t.requestAnimFrame(function(){e.animation(e)})):t.requestAnimFrame(function(){e.Animationed=!0,e.plugins.each(function(t){t.Animationed=!0}),e.processAnimation=!1,e.draw(),e.plugins.each(function(t){t.processAnimation=!1}),e.fireEvent(e,"afterAnimation",[e])}))},runAnimation:function(t){t.fireEvent(t,"beforeAnimation",[t]),t.A_draw||(t.variable.animation={type:0,time:0,queue:[]}),t.processAnimation=!0,t.animation(t)},doSort:function(){var e=function(e,i){return(t.isArray(e)?e.zIndex||0:e.get("z_index"))>(t.isArray(i)?i.zIndex||0:i.get("z_index"))};this.components.sor(e),this.oneways.sor(e)},commonDraw:function(e,i){e.show=!1,e.redraw||(t.Assert.isTrue(e.Rendered,e.type+" has not rendered"),t.Assert.isTrue(e.data&&0<e.data.length,e.type+"'s data is empty"),t.Assert.isTrue(e.initialization,e.type+" Failed to initialize"),e.doSort()),e.redraw=!0,!e.Animationed&&e.get("animation")?e.runAnimation(e):(e.segmentRect(),e.components.eachAll(function(t){t.draw(i)}),e.components.eachAll(function(t){t.last&&t.last(t)}),e.oneways.each(function(t){t.draw()}),e.show=!0)},plugin:function(t){var e=this._();t.inject(e),t.ICHARTJS_CHART&&(t.Combination=!0,t.setUp()),e.get("animation")||t.push("animation",!1),t.duration=e.duration,e.register(t),e.plugins.push(t)},destroy:function(t){t.components.eachAll(function(t){t.destroy()}),t.oneways.each(function(t){t.destroy()})},getTitle:function(){return this.title},getSubTitle:function(){return this.subtitle},getFootNote:function(){return this.footnote},getDrawingArea:function(){return{x:this.get("l_originx"),x:this.get("t_originy"),width:this.get("client_width"),height:this.get("client_height")}},create:function(i,n){if(i.get("fit")){var o=window.innerWidth,s=window.innerHeight,a=t.getDoc().body.style;a.padding="0px",a.margin="0px",a.overflow="hidden",i.push(i.W,o),i.push(i.H,s)}i.canvasid=t.uid(i.type),i.shellid="shell-"+i.canvasid,(o=[]).push("<div id='"),o.push(i.shellid),o.push("' style='padding:0px;margin:0px;overflow:hidden;position:relative;'>"),o.push("<canvas id= '"),o.push(i.canvasid),o.push("' style='-webkit-text-size-adjust: none;'>"),o.push("<p>Your browser does not support the canvas element</p></canvas>"),o.push("</div>"),n.innerHTML=o.join(""),i.shell=t(i.shellid),i.T=i.target=new e(i.canvasid),i.size(i),i.Rendered=!0},setUp:function(){var t=this._();t.redraw=!1,t.T.clearRect(),t.initialization=!1,t.initialize()},load:function(t){var e=this._();e.push("data",t||[]),e.setUp(),(e.Combination?e.root:e).draw()},resize:function(e,i){var e=t.parseFloat(e),i=t.parseFloat(i),n=this._();n.Combination||(n.width=n.push(n.W,e),n.height=n.push(n.H,i),n.size(n)),n.set(n.fireEvent(n,"resize",[e,i])),n.setUp(),n.plugins.eachAll(function(t){t.Combination&&t.resize(e,i)}),n.Combination||n.draw()},size:function(t){t.T.canvas.width=t.width=t.pushIf(t.W,400),t.T.canvas.height=t.height=t.pushIf(t.H,300),t.shell.style.width=t.width+"px",t.shell.style.height=t.height+"px"},initialize:function(){var e=this._(),i=e.get("data"),n=e.get("render");e.push(e.X,null),e.push(e.Y,null),e.Combination?(t.apply(e.options,t.clone([e.W,e.H,"padding","border","client_height","client_width","minDistance","maxDistance","centerx","centery","l_originx","r_originx","t_originy","b_originy"],e.root.options,!0)),e.width=e.get(e.W),e.height=e.get(e.H),e.shell=e.root.shell,e.Rendered=!0):e.Rendered||n&&e.create(e,t(n)),e.Rendered&&!e.initialization&&(i&&0<i.length?f.call(e,i,e):t.isString(e.get("url"))&&e.ajax.call(e,e.get("url"),function(t){e.push("data",t),e.initialize(),e.draw()}))},eventOff:function(){this.stopEvent=!0},eventOn:function(){this.stopEvent=!1},oneWay:function(e){e.T.strokeStyle(!0,0,e.get("strokeStyle"),e.get("lineJoin")),e.processAnimation=e.get("animation"),t.isFunction(e.get("doAnimation"))&&(e.doAnimation=e.get("doAnimation")),e.animationArithmetic=t.getAA(e.get("animation_timing_function"));var i,n=e.variable.event,o=e.Combination,a=!e.get("turn_off_touchmove")&&!o,r=!t.touch&&e.get("default_mouseover_css")&&!o,l=t.touch?["touchstart","touchmove"]:["click","mousemove"];e.stopEvent=!1,e.A_draw=o&&e.processAnimation,t.register(e),o||l.each(function(i){e.T.addEvent(i,function(n){e.processAnimation||e.stopEvent||n.targetTouches&&1!=n.targetTouches.length||e.fireEvent(e,i,[e,t.Event.fix(n)])},!1)}),e.on(l[0],function(t,e){if(t.components.eachAll(function(t){if(t.ICHARTJS_CHART){if(t.fireEvent(t,l[0],[t,e]))return n.click=!0,!1}else{var i=t.isMouseOver(e);if(i.valid)return n.click=!0,t.fireEvent(t,"click",[t,e,i]),!e.stopPropagation}}),n.click)return a&&e.event.preventDefault(),n.click=!1,!0}),t.touch&&!a||(e.on(l[1],function(t,e){if(i=!1,t.components.eachAll(function(t){if(!t.ICHARTJS_CHART){var n=t.variable.event,o=t.isMouseOver(e);if(o.valid){if(i=i||t.atomic,n.mouseover||(n.mouseover=!0,t.fireEvent(t,"mouseover",[t,e,o])),t.fireEvent(t,"mousemove",[t,e,o]),o.stop)return!1}else n.mouseover&&(n.mouseover=!1,t.fireEvent(t,"mouseout",[t,e,o]));return!e.stopPropagation}if(t.fireEvent(t,l[1],[t,e]))return i=!0,!1}),n.mouseover)return e.event.preventDefault(),i||(n.mouseover=!1,t.fireEvent(t,"mouseout",[t,e])),n.mouseover;i&&(n.mouseover=i,t.fireEvent(t,"mouseover",[t,e]))}),r&&e.on("mouseover",function(){e.T.css("cursor","pointer")}).on("mouseout",function(){e.T.css("cursor","default")})),t.applyIf(e.get("sub_option"),t.clone(["shadow","tip"],e.options,!0)),e.Combination||(e.bg=new t.Custom({z_index:-1,drawFn:function(){e.T.box(0,0,e.width,e.height,e.get("border"),e.get("f_color"),0,0,!0)}}),e.duration=s(e.get("animation_duration")*t.FRAME/1e3)),e.oneWay=t.emptyFn},originXY:function(t,e,i){var n=t.get("align");return n==t.L?t.pushIf(t.X,e[0]):n==t.R?t.pushIf(t.X,e[1]):t.pushIf(t.X,e[2]),t.x=t.push(t.X,t.get(t.X)+t.get("offsetx")),t.y=t.push(t.Y,i[0]+t.get("offsety")),{x:t.x,y:t.y}},getPercent:function(t,e){return this.get("showpercent")?(t/(e||this.total||1)*100).toFixed(this.get("decimalsnum"))+"%":t},doActing:function(e,i,n,o,s){var a=!!e.get("communal_acting"),r=e.getPercent(i.value,i.total);e.push(a?"sub_option":"communal_acting",t.clone(e.get(a?"communal_acting":"sub_option"),!0)),t.merge(e.get("sub_option"),i),t.merge(e.get("sub_option"),n),e.push("sub_option.value",r),e.push("sub_option.value_",i.value),e.get("sub_option.tip.enable")&&(e.push("sub_option.tip.text",s||i.name+" "+r),e.push("sub_option.tip.name",i.name),e.push("sub_option.tip.index",o),e.push("sub_option.tip.value",i.value),e.push("sub_option.tip.total",i.total||e.total))},register:function(e){return e.id=t.uid(e.type),this.components.push(e),e},remove:function(t,e){e&&t.components.each(function(i,n){if(e.id==i.id)return t.components.splice(n,1),!1})},doConfig:function(){t.Chart.superclass.doConfig.call(this);var e=this._();if(e.destroy(e),e.oneways.length=0,e.oneWay(e),e.push("communal_acting",0),!e.Combination){e.oneways.push(e.bg),e.push("r_originx",e.width-e.get("padding_right")),e.push("b_originy",e.height-e.get("padding_bottom")),e.applyGradient(),t.isString(e.get("title"))&&e.push("title",t.applyIf({text:e.get("title")},e.default_.title)),t.isString(e.get("subtitle"))&&e.push("subtitle",t.applyIf({text:e.get("subtitle")},e.default_.subtitle)),t.isString(e.get("footnote"))&&e.push("footnote",t.applyIf({text:e.get("footnote")},e.default_.footnote));var i=0,n=e.push("l_originx",e.get("padding_left")),o=e.push("t_originy",e.get("padding_top")),s=e.push("client_width",e.width-e.get("hpadding"));if(""!=e.get("title.text")){var a=""!=e.get("subtitle.text"),i=a?e.get("title.height")+e.get("subtitle.height"):e.get("title.height"),o=e.push("t_originy",o+i);e.push("title.originx",n),e.push("title.originy",e.get("padding_top")),e.push("title.maxwidth",s),e.pushIf("title.width",s),e.title=new t.Text(e.get("title"),e),e.oneways.push(e.title),a&&(e.push("subtitle.originx",n),e.push("subtitle.originy",e.get("padding_top")+e.get("title.height")),e.pushIf("subtitle.width",s),e.push("subtitle.maxwidth",s),e.subtitle=new t.Text(e.get("subtitle"),e),e.oneways.push(e.subtitle))}""!=e.get("footnote.text")&&(a=e.get("footnote.height"),i+=a,e.push("b_originy",e.get("b_originy")-a),e.push("footnote.originx",n),e.push("footnote.originy",e.get("b_originy")),e.push("footnote.maxwidth",s),e.pushIf("footnote.width",s),e.footnote=new t.Text(e.get("footnote"),e),e.oneways.push(e.footnote)),i=e.push("client_height",e.get(e.H)-e.get("vpadding")-e.pushIf("other_height",i)),e.push("minDistance",c(s,i)),e.push("maxDistance",l(s,i)),e.push("centerx",n+s/2),e.push("centery",o+i/2)}e.get("legend.enable")&&(e.legend=new t.Legend(t.apply({maxwidth:e.get("client_width"),data:e.data},e.get("legend")),e),e.oneways.push(e.legend)),e.push("sub_option.tip.wrap",e.push("tip.wrap",e.shell))}})}(t),t.Custom=t.extend(t.Component,{configure:function(){t.Custom.superclass.configure.apply(this,arguments),this.type="custom",this.set({drawFn:t.emptyFn,configFn:t.emptyFn,eventValid:void 0,animating_draw:!0})},doDraw:function(t){t.get("drawFn").call(t,t)},isEventValid:function(e,i){return t.isFunction(this.get("eventValid"))?this.get("eventValid").call(this,e,i):{valid:!1}},doConfig:function(){t.Custom.superclass.doConfig.call(this);var e=this._();e.A_draw=e.get("animating_draw"),e.variable.animation={animating:!1,time:0},e.duration=0,e.get("configFn").call(e,e)}}),t.Scale=t.extend(t.Component,{configure:function(){t.Scale.superclass.configure.apply(this,arguments),this.type="scale",this.set({position:"left",which:"h",basic_value:0,scale2grid:!0,distance:void 0,start_scale:0,end_scale:void 0,min_scale:void 0,max_scale:void 0,scale_space:void 0,scale_share:5,scale_enable:!0,scale_size:1,scale_width:4,scale_color:"#333333",scaleAlign:"center",labels:[],label:{},text_space:6,textAlign:"left",decimalsnum:0,join_style:"none",join_size:2}),this.registerEvent("parseText")},isEventValid:function(){return{valid:!1}},getScale:function(e){return e=[e.get("basic_value"),e.get("start_scale"),e.get("end_scale"),e.get("end_scale")-e.get("start_scale"),0],e[4]=t.inRange(e[1],e[2]+1,e[0])||t.inRange(e[2]-1,e[1],e[0]),{range:e[4],basic:e[4]?(e[0]-e[1])/e[3]:0,start:e[4]?e[0]:e[1],end:e[2],distance:e[3]}},doDraw:function(t){t.get("scale_enable")&&t.items.each(function(e){t.T.line(e.x0,e.y0,e.x1,e.y1,t.get("scale_size"),t.get("scale_color"),!1)}),t.labels.each(function(t){t.draw()})},doLayout:function(t,e,i){i.get("scale_enable")&&i.items.each(function(i){i.x0+=t,i.y0+=e,i.x1+=t,i.y1+=e}),i.labels.each(function(i){i.doLayout(t,e,0,i)})},doConfig:function(){t.Scale.superclass.doConfig.call(this);var e=this._(),i=Math.abs,n=e.get("labels").length,o=e.get("min_scale"),s=e.get("max_scale"),a=e.get("scale_space"),r=e.get("end_scale"),l=e.get("start_scale");if(e.items=[],e.labels=[],e.number=0,0<n)e.number=n-1;else{if(l>o&&(l=e.push("start_scale",t.floor(o))),(!t.isNumber(r)||r<s)&&(r=t.ceil(s),r=e.push("end_scale",r||l?r:1)),a&&i(a)<i(r-l)&&e.push("scale_share",(r-l)/a),e.number=e.push("scale_share",i(e.get("scale_share"))),!a||a>r-l){for(a=(r-l+"").indexOf(".")+1,i=1;0<a;)a--,i*=10;a=e.push("scale",(r-l)*i/e.get("scale_share")/i)}parseInt(a)!=a&&0==e.get("decimalsnum")&&e.push("decimalsnum",(a+"").substring((a+"").indexOf(".")+1).length)}e.push("distanceOne",e.get("valid_distance")/e.number);var c,u,h,g=s=o=i=r=0,d=0;u=(c=e.get("scale_width"))/2,h=e.get("scaleAlign");var p=e.get("position"),f=e.get("text_space"),y="",x=e.get("coo").get("axis.width");for(e.push("which",e.get("which").toLowerCase()),e.isH="h"==e.get("which"),e.isH?(h==e.O?s=-c:h==e.C?(s=-u,i=u):i=c,p==e.O?(d=-f-x[0],y=e.B):(d=f+x[2],y=e.O),p=e.C):(h==e.L?o=-c:h==e.C?(o=-u,r=u):r=c,y="middle",p==e.R?(p=e.L,g=f+x[1]):(p=e.R,g=-f-x[3])),f=0;f<=e.number;f++)c=n?e.get("labels")[f]:(a*f+l).toFixed(e.get("decimalsnum")),u=e.isH?e.get("valid_x")+f*e.get("distanceOne"):e.x,h=e.isH?e.y:e.get("valid_y")+e.get("valid_distance")-f*e.get("distanceOne"),e.items.push({x:u,y:h,x0:u+o,y0:h+s,x1:u+r,y1:h+i}),e.get("label")&&e.labels.push(new t.Text(t.applyIf(t.apply(e.get("label"),t.merge({text:c,x:u,y:h,originx:u+g,originy:h+d},e.fireEvent(e,"parseText",[c,u+g,h+d,f,e.number==f]))),{textAlign:p,textBaseline:y}),e))}}),t.Coordinate={coordinate_:function(e){var i=this._();if((n=i.get("coordinate")).ICHARTJS_OBJECT)return i.x=i.push(i.X,n.x),i.y=i.push(i.Y,n.y),i.ILLUSIVE_COO=!0,n;var n=t.parsePercent,o=i.get("coordinate.scale"),s=i.get("scaleAlign"),a=i.push("coordinate._width",n(i.get("coordinate.width")||"85%",Math.floor(i.get("client_width"))));if(h=i.push("coordinate._height",n(i.get("coordinate.height")||"85%",Math.floor(i.get("client_height")))-(i.is3D()?(i.get("coordinate.pedestal_height")||22)+(i.get("coordinate.board_deep")||20):0)),i.push("coordinate.valid_height_value",n(i.get("coordinate.valid_height"),h)),i.push("coordinate.valid_width_value",n(i.get("coordinate.valid_width"),a)),i.originXY(i,[i.get("l_originx"),i.get("r_originx")-a,i.get("centerx")-a/2],[i.get("centery")-h/2]),i.push("coordinate.originx",i.x),i.push("coordinate.originy",i.y),e&&e(),t.isObject(o)&&(o=[o]),t.isArray(o)){var r="stacked"!=i.dataType;o.each(function(e){i.get("percent")&&e.position==s&&(e=t.apply(e,{start_scale:0,end_scale:100,scale_space:10,listeners:{parseText:function(t){return{text:t+"%"}}}})),(!e.start_scale||r&&e.start_scale>i.get("minValue"))&&(e.min_scale=i.get("minValue")),(!e.end_scale||r&&e.end_scale<i.get("maxValue"))&&(e.max_scale=i.get("maxValue"))})}else i.push("coordinate.scale",{position:s,scaleAlign:s,max_scale:i.get("maxValue"),min_scale:i.get("minValue")});return i.is3D()&&(i.push("coordinate.xAngle_",i.get("xAngle_")),i.push("coordinate.yAngle_",i.get("yAngle_")),i.push("coordinate.zHeight",i.get("zHeight")*i.get("bottom_scale"))),i.remove(i,i.coo),i.register(new(t[i.is3D()?"Coordinate3D":"Coordinate2D"])(i.get("coordinate"),i))}},t.Coordinate2D=t.extend(t.Component,{configure:function(){t.Coordinate2D.superclass.configure.apply(this,arguments),this.type="coordinate2d",this.set({sign_size:12,sign_space:5,scale:[],width:"85%",height:"85%",valid_width:"100%",valid_height:"100%",grid_line_width:1,grid_color:"#dbe1e1",gridHStyle:{},gridVStyle:{},gridlinesVisible:!0,scale2grid:!0,grids:void 0,ignoreOverlap:!0,ignoreEdge:!1,xlabel:"",ylabel:"",background_color:0,striped:!0,striped_direction:"v",striped_factor:.01,crosshair:{enable:!1},z_index:-1,axis:{enable:!0,color:"#666666",width:1}}),this.scale=[],this.gridlines=[]},getScale:function(t,e){for(var i=this._(),n=0;n<i.scale.length;n++)if(i.scale[n].get("position")==t)return i.scale[n].getScale(i.scale[n]);if(!e)return t=t==i.L?i.R:t==i.R?i.L:t==i.O?i.B:i.O,i.getScale(t,!0);throw Error("there no valid scale")},isEventValid:function(t,e){return{valid:t.x>e.x&&t.x<e.x+e.width&&t.y<e.y+e.height&&t.y>e.y}},doDraw:function(e){if(e.T.box(e.x,e.y,e.width,e.height,0,e.get("f_color")),e.get("striped")){var i,n,o=!1;e.get("axis.width");var s=t.dark(e.get("background_color"),e.get("striped_factor"),0)}var a="v"==e.get("striped_direction");e.gridlines.each(function(t){e.get("striped")&&(o&&(a?e.T.box(t.x1,t.y1+t.width,t.x2-t.x1,n-t.y1-t.width,0,s):e.T.box(i+t.width,t.y2,t.x1-i,t.y1-t.y2,0,s)),i=t.x1,n=t.y1,o=!o)}).each(function(t){t.overlap||(t.solid?e.T.line(t.x1,t.y1,t.x2,t.y2,t.width,t.color):e.T.dotted(t.x1,t.y1,t.x2,t.y2,t.width,t.color,t.size,t.fator))}),e.T.box(e.x,e.y,e.width,e.height,e.get("axis"),!1,e.get("shadow"),!0),e.scale.each(function(t){t.draw()})},destroy:function(){this.crosshair&&this.crosshair.destroy()},doCrosshair:function(e){e.get("crosshair.enable")&&!e.crosshair&&(e.push("crosshair.wrap",e.root.shell),e.push("crosshair.height",e.height),e.push("crosshair.width",e.width),e.push("crosshair.top",e.y),e.push("crosshair.left",e.x),e.crosshair=new t.CrossHair(e.get("crosshair"),e))},doConfig:function(){t.Coordinate2D.superclass.doConfig.call(this);var e=this._();if(e.atomic=!1,e.width=e.get("_width"),e.height=e.get("_height"),e.valid_width=e.get("valid_width_value"),e.valid_height=e.get("valid_height_value"),e.get("gradient")&&t.isString(e.get("f_color"))&&e.push("f_color",e.T.avgLinearGradient(e.x,e.y,e.x,e.y+e.height,[e.get("dark_color"),e.get("light_color")])),e.get("axis.enable")){c=e.get("axis.width");t.isArray(c)||e.push("axis.width",[c,c,c,c])}else e.push("axis.width",[0,0,0,0]);e.doCrosshair(e);var i,n=(c=!(!e.get("gridlinesVisible")||!e.get("grids")))&&!!e.get("grids.horizontal"),o=c&&!!e.get("grids.vertical"),s=e.height,a=e.width,r=e.valid_width,l=e.valid_height,c=e.get("gridlinesVisible")&&e.get("scale2grid")&&!(n&&o),u=e.push("x_start",e.x+(a-r)/2),h=e.push("y_start",e.y+(s-l)/2),g=e.get("axis.width");e.push("x_end",e.x+(a+r)/2),e.push("y_end",e.y+(s+l)/2),t.isArray(e.get("scale"))||(t.isObject(e.get("scale"))?e.push("scale",[e.get("scale")]):e.push("scale",[])),e.get("scale").each(function(n){i=(i=n.position)||e.L,i=i.toLowerCase(),n[e.X]=e.x,n.coo=e,n[e.Y]=e.y,n.valid_x=u,n.valid_y=h,n.position=i,i==e.O?(n.which="h",n.distance=a,n.valid_distance=r):i==e.R?(n.which="v",n.distance=s,n.valid_distance=l,n[e.X]+=a,n.valid_x+=r):i==e.B?(n.which="h",n.distance=a,n.valid_distance=r,n[e.Y]+=s,n.valid_y+=l):(n.which="v",n.distance=s,n.valid_distance=l),e.scale.push(new t.Scale(n,e.root))},e);var d=e.push("ignoreOverlap",e.get("ignoreOverlap")&&e.get("axis.enable")||e.get("ignoreEdge"));if(d)var p=e.get("ignoreEdge")?function(t,i,n){return"v"==t?n==e.y||n==e.y+s:i==e.x||i==e.x+t}:function(t,i,n){return"v"==t?n==e.y&&0<g[0]||n==e.y+s&&0<g[2]:i==e.x&&0<g[3]||i==e.x+a&&0<g[1]};var f={solid:!0,size:10,fator:1,width:e.get("grid_line_width"),color:e.get("grid_color")},y=t.applyIf(e.get("gridHStyle"),f),x=t.applyIf(e.get("gridVStyle"),f);if(c){var _,b,m;e.scale.each(function(i){m=i.get("position"),t.isFalse(i.get("scale2grid"))||n&&"v"==i.get("which")||o&&"h"==i.get("which")||(_=b=0,m==e.O?b=s:m==e.R?_=-a:m==e.B?b=-s:_=a,i.items.each(function(n){d&&e.gridlines.push(t.applyIf({overlap:p.call(e,i.get("which"),n.x,n.y),x1:n.x,y1:n.y,x2:n.x+_,y2:n.y+b},i.isH?x:y))}))})}if(o){var v=e.get("grids.vertical");for(t.Assert.isTrue(0<v.value,"vertical value"),c=a/v.value,f=v.value,"given_value"==v.way&&(f=c,c=v.value,c=c>a?a:c),v=0;v<=f;v++)d&&e.gridlines.push(t.applyIf({overlap:p.call(e,"h",e.x+v*c,e.y),x1:e.x+v*c,y1:e.y,x2:e.x+v*c,y2:e.y+s,H:!1,width:x.width,color:x.color},x))}if(n)for(v=e.get("grids.horizontal"),t.Assert.isTrue(0<v.value,"horizontal value"),c=s/v.value,f=v.value,"given_value"==v.way&&(f=c,c=v.value,c=c>s?s:c),v=0;v<=f;v++)d&&e.gridlines.push(t.applyIf({overlap:p.call(e,"v",e.x,e.y+v*c),x1:e.x,y1:e.y+v*c,x2:e.x+a,y2:e.y+v*c,H:!0,width:y.width,color:y.color},y))}}),t.Coordinate3D=t.extend(t.Coordinate2D,{configure:function(){t.Coordinate3D.superclass.configure.apply(this,arguments),this.type="coordinate3d",this.dimension=t._3D,this.set({xAngle:60,yAngle:20,xAngle_:void 0,yAngle_:void 0,zHeight:0,pedestal_height:22,board_deep:20,left_board:!0,gradient:!0,color_factor:.18,ignoreEdge:!0,striped:!1,grid_color:"#a4ad96",background_color:"#d6dbd2",shadow_offsetx:4,shadow_offsety:2,wall_style:[],axis:{enable:!1}})},doDraw:function(t){var e=t.width,i=t.height,n=t.get("xAngle_"),o=t.get("yAngle_"),s=t.get("zHeight"),a=t.get("z_offx"),r=t.get("z_offy");t.get("pedestal_height")&&t.T.cube3D(t.x,t.y+i+t.get("pedestal_height"),n,o,!1,e,t.get("pedestal_height"),3*s/2,t.get("axis.enable"),t.get("axis.width"),t.get("axis.color"),t.get("bottom_style")),t.get("board_deep")&&t.T.cube3D(t.x+a,t.y+i-r,n,o,!1,e,i,t.get("board_deep"),t.get("axis.enable"),t.get("axis.width"),t.get("axis.color"),t.get("board_style")),t.T.cube3D(t.x,t.y+i,n,o,!1,e,i,s,t.get("axis.enable"),t.get("axis.width"),t.get("axis.color"),t.get("wall_style")),t.gridlines.each(function(e){e.solid?(t.get("left_board")&&t.T.line(e.x1,e.y1,e.x1+a,e.y1-r,e.width,e.color),t.T.line(e.x1+a,e.y1-r,e.x2+a,e.y2-r,e.width,e.color)):(t.get("left_board")&&t.T.dotted(e.x1,e.y1,e.x1+a,e.y1-r,e.width,e.color,e.size,e.fator),t.T.dotted(e.x1+a,e.y1-r,e.x2+a,e.y2-r,e.width,e.color,e.size,e.fator))}),t.scale.each(function(t){t.draw()})},doConfig:function(){t.Coordinate3D.superclass.doConfig.call(this);for(var e=this._(),i=e.get("wall_style"),n=e.get("background_color")||"#d6dbd2",o=e.height,s=e.width,a=e.get("color_factor"),r=e.push("z_offx",e.get("xAngle_")*e.get("zHeight")),l=e.push("z_offy",e.get("yAngle_")*e.get("zHeight"));6>i.length;)i.push({color:n});e.get("left_board")||(i[2]=!1,e.scale.each(function(t){t.doLayout(r,-l,t)})),e.push("bottom_style",[{color:e.get("shadow_color"),shadow:e.get("shadow")},!1,!1,{color:i[3].color},!1,{color:i[3].color}]),e.push("board_style",[!1,!1,!1,{color:i[4].color},{color:i[5].color},!1]),e.get("gradient")&&(t.isString(i[0].color)&&(i[0].color=e.T.avgLinearGradient(e.x,e.y+o,e.x+s,e.y+o,[t.dark(i[0].color,a/2+.06),t.dark(i[0].color,a/2+.06)])),t.isString(i[1].color)&&(i[1].color=e.T.avgLinearGradient(e.x+r,e.y-l,e.x+r,e.y+o-l,[t.dark(i[1].color,a),t.light(i[1].color,a)])),t.isString(i[2].color)&&(i[2].color=e.T.avgLinearGradient(e.x,e.y,e.x,e.y+o,[t.light(i[2].color,a/3),t.dark(i[2].color,a)])),e.get("bottom_style")[5].color=e.T.avgLinearGradient(e.x,e.y+o,e.x,e.y+o+e.get("pedestal_height"),[t.light(i[3].color,a/2+.06),t.dark(i[3].color,a/2,0)])),e.push("wall_style",[i[0],i[1],i[2]])}}),t.Rectangle=t.extend(t.Component,{configure:function(){t.Rectangle.superclass.configure.apply(this,arguments),this.type="rectangle",this.set({width:0,height:0,value_space:4,value:"",label:{},name:"",tipAlign:"top",valueAlign:"top",shadow_blur:3,shadow_offsety:-1}),this.atomic=!0,this.registerEvent("parseText"),this.label=null},last:function(t){t.label&&t.label.draw()},doDraw:function(t){t.drawRectangle()},doConfig:function(){t.Rectangle.superclass.doConfig.call(this);var e=this._(),i=e.variable.event,n=e.get("valueAlign");t.taylor.light(e,i),e.width=e.get(e.W),e.height=e.get(e.H);var i=e.push("centerx",e.x+e.width/2),o=e.push("centery",e.y+e.height/2),s=e.C,a="middle",r=e.get("value_space");n==e.L?(s=e.R,i=e.x-r):n==e.R?(s=e.L,i=e.x+e.width+r):n==e.B?(o=e.y+e.height+r,a=e.O):n==e.O&&(o=e.y-r,a=e.B),e.get("label")&&(e.push("label.originx",i),e.push("label.originy",o),e.push("label.text",e.push("value",e.fireString(e,"parseText",[e,e.get("value")],e.get("value")))),t.applyIf(e.get("label"),{textAlign:s,textBaseline:a,color:e.get("color")}),e.label=new t.Text(e.get("label"),e)),e.get("tip.enable")&&("follow"!=e.get("tip.showType")&&e.push("tip.invokeOffsetDynamic",!1),e.tip=new t.Tip(e.get("tip"),e))}}),t.Rectangle2D=t.extend(t.Rectangle,{configure:function(){t.Rectangle2D.superclass.configure.apply(this,arguments),this.type="rectangle2d",this.set({shadow_offsety:-2})},drawRectangle:function(){var t=this._();t.T.box(t.get(t.X),t.get(t.Y),t.get(t.W),t.get(t.H),t.get("border"),t.get("f_color"),t.get("shadow"))},isEventValid:function(t,e){return{valid:t.x>e.x&&t.x<e.x+e.width&&t.y<e.y+e.height&&t.y>e.y}},tipInvoke:function(){var t=this._();return function(e,i){return{left:t.tipX(e,i),top:t.tipY(e,i)}}},doConfig:function(){t.Rectangle2D.superclass.doConfig.call(this);var e=this._(),i=e.get("tipAlign");i==e.L||i==e.R?e.tipY=function(t,i){return e.get("centery")-i/2}:e.tipX=function(t){return e.get("centerx")-t/2},i==e.L?e.tipX=function(t){return e.x-e.get("value_space")-t}:i==e.R?e.tipX=function(){return e.x+e.width+e.get("value_space")}:e.tipY=i==e.B?function(){return e.y+e.height+3}:function(t,i){return e.y-i-3},e.applyGradient()}}),t.Rectangle3D=t.extend(t.Rectangle,{configure:function(){t.Rectangle3D.superclass.configure.apply(this,arguments),this.type="rectangle3d",this.dimension=t._3D,this.set({zHeight:void 0,xAngle:60,yAngle:20,xAngle_:void 0,yAngle_:void 0,shadow_offsetx:2})},drawRectangle:function(){var t=this._();t.T.cube(t.get(t.X),t.get(t.Y),t.get("xAngle_"),t.get("yAngle_"),t.get(t.W),t.get(t.H),t.get("zHeight"),t.get("f_color"),t.get("border.enable"),t.get("border.width"),t.get("light_color"),t.get("shadow"))},isEventValid:function(t,e){return{valid:t.x>e.x&&t.x<e.x+e.get(e.W)&&t.y<e.y+e.get(e.H)&&t.y>e.y}},tipInvoke:function(){var t=this._();return function(e,i){return{left:t.topCenterX-e/2,top:t.topCenterY-i}}},doConfig:function(){t.Rectangle3D.superclass.doConfig.call(this);var e=this._();e.pushIf("zHeight",e.get(e.W)),e.topCenterX=e.x+(e.get(e.W)+e.get(e.W)*e.get("xAngle_"))/2,e.topCenterY=e.y-e.get(e.W)*e.get("yAngle_")/2-e.get("value_space"),e.get("valueAlign")==e.O&&e.label&&(e.label.push("textx",e.topCenterX),e.label.push("texty",e.topCenterY))}}),t.Sector=t.extend(t.Component,{configure:function(){t.Sector.superclass.configure.apply(this,arguments),this.type="sector",this.set({value:"",name:"",ignored:!1,counterclockwise:!1,startAngle:0,middleAngle:0,endAngle:0,totalAngle:0,bound_event:"click",expand:!1,donutwidth:0,mutex:!1,increment:void 0,label_length:void 0,gradient_mode:"RadialGradientOutIn",mini_label_threshold_angle:15,mini_label:!1,label:{},rounded:!1}),this.atomic=!0,this.registerEvent("changed","parseText"),this.tip=this.label=null},bound:function(){this.expanded||this.toggle()},rebound:function(){this.expanded&&this.toggle()},toggle:function(){this.fireEvent(this,this.get("bound_event"),[this])},getDimension:function(){var t=this._();return{x:t.x,x:t.y,startAngle:t.get("startAngle"),middleAngle:t.get("middleAngle"),endAngle:t.get("endAngle")}},doDraw:function(t){t.get("ignored")||(t.label&&!t.get("mini_label")&&t.label.draw(),t.drawSector(),t.label&&t.get("mini_label")&&t.label.draw())},doText:function(e,i,n){e.push("label.originx",i),e.push("label.originy",n),e.push("label.textBaseline","middle"),e.label=new t.Text(e.get("label"),e)},doLabel:function(e,i,n,o,s,a,r,l){e.push("label.originx",i),e.push("label.originy",n),e.push("label.quadrantd",o),e.push("label.line_points",s),e.push("label.labelx",a),e.push("label.labely",r),e.push("label.smooth",l),e.push("label.angle",e.get("middleAngle")%(2*Math.PI)),e.label=new t.Label(e.get("label"),e)},isLabel:function(){return this.get("label")&&!this.get("mini_label")},doConfig:function(){t.Sector.superclass.doConfig.call(this);var e,i=this._(),n=i.variable.event,o=i.get("label"),s=i.get("bound_event");i.get("rounded")?(i.push("startAngle",0),i.push("endAngle",2*Math.PI)):(t.taylor.light(i,n),i.push("totalAngle",i.get("endAngle")-i.get("startAngle")),o&&(i.get("mini_label")&&(i.get("mini_label_threshold_angle")*Math.PI/180>i.get("totalAngle")?i.push("mini_label",!1):t.apply(i.get("label"),i.get("mini_label"))),i.push("label.text",i.fireString(i,"parseText",[i,i.get("label.text")],i.get("label.text"))),i.pushIf("label.border.color",i.get("border.color")),i.push("label.scolor",i.get("background_color"))),i.variable.event.status=i.expanded=i.get("expand"),i.get("tip.enable")&&("follow"!=i.get("tip.showType")&&i.push("tip.invokeOffsetDynamic",!1),i.tip=new t.Tip(i.get("tip"),i)),n.poped=!1,i.on(s,function(){n.poped=!0,i.expanded=!i.expanded,i.redraw(s),n.poped=!1}),i.on("beforedraw",function(t,a){return a==s&&(e=!1,i.x=i.get(i.X),i.y=i.get(i.Y),i.expanded&&(i.get("mutex")&&!n.poped?(i.expanded=!1,e=!0):(i.x=i.x+i.get("inc_x"),i.y=i.y-i.get("inc_y"))),n.status!=i.expanded&&(i.fireEvent(i,"changed",[i,i.expanded]),e=!0,n.status=i.expanded),o&&e&&i.label.doLayout(i.get("inc_x")*(i.expanded?1:-1),-i.get("inc_y")*(i.expanded?1:-1),2,i.label)),!0}))}}),t.Sector2D=t.extend(t.Sector,{configure:function(){t.Sector2D.superclass.configure.apply(this,arguments),this.type="sector2d",this.set({radius:0})},drawSector:function(){this.T.sector(this.x,this.y,this.r,this.get("donutwidth"),this.get("startAngle"),this.get("endAngle"),this.get("f_color"),this.get("border.enable"),this.get("border.width"),this.get("border.color"),this.get("shadow"),this.get("counterclockwise"))},isEventValid:function(e,i){if(!i.get("ignored")){if(i.isLabel()&&i.label.isEventValid(e,i.label).valid)return{valid:!0};var n=t.distanceP2P(i.x,i.y,e.x,e.y),o=i.get("donutwidth");if(i.r<n||o&&i.r-o>n)return{valid:!1};if(t.angleInRange(i.get("startAngle"),i.get("endAngle"),t.atan2Radian(i.x,i.y,e.x,e.y)))return{valid:!0}}return{valid:!1}},tipInvoke:function(){var e=this,i=e.get("middleAngle"),n=t.quadrantd(i);return function(o,s){var a=t.p2Point(e.x,e.y,i,.8*e.r);return{left:1<=n&&2>=n?a.x-o:a.x,top:2<=n?a.y-s:a.y}}},doConfig:function(){t.Sector2D.superclass.doConfig.call(this);var e=this._();e.r=e.get("radius"),e.get("donutwidth")>e.r&&e.push("donutwidth",0),e.applyGradient(e.x-e.r,e.y-e.r,1.8*e.r,1.8*e.r);var i=e.get("middleAngle"),n=e.pushIf("increment",t.lowTo(5,e.r/10));if(e.push("inc_x",n*Math.cos(2*Math.PI-i)),e.push("inc_y",n*Math.sin(2*Math.PI-i)),n*=2,e.get("label"))if(e.get("mini_label"))P2=t.p2Point(e.x,e.y,i,e.get("donutwidth")?e.r-e.get("donutwidth")/2:5*e.r/8),e.doText(e,P2.x,P2.y);else{var o=t.quadrantd(i),s=t.p2Point(e.x,e.y,i,e.r+n),a=t.p2Point(e.x,e.y,i,e.r+.6*n);P2=t.p2Point(e.x,e.y,i,e.r),e.doLabel(e,P2.x,P2.y,o,[{x:P2.x,y:P2.y},{x:a.x,y:a.y},{x:s.x,y:s.y}],s.x,s.y,.4*n)}}}),t.Sector3D=t.extend(t.Sector,{configure:function(){t.Sector3D.superclass.configure.apply(this,arguments),this.type="sector3d",this.dimension=t._3D,this.set({semi_major_axis:0,semi_minor_axis:0,cylinder_height:0}),this.proxy=!0},isEventValid:function(e,i){if(!i.get("ignored")){if(i.isLabel()&&i.label.isEventValid(e,i.label).valid)return{valid:!0};if(!t.inEllipse(e.x-i.x,e.y-i.y,i.a,i.b))return{valid:!1};if(t.angleZInRange(i.sA,i.eA,t.atan2Radian(i.x,i.y,e.x,e.y)))return{valid:!0}}return{valid:!1}},p2p:function(t,e,i,n){return{x:t+this.a*Math.cos(i)*n,y:e+this.b*Math.sin(i)*n}},tipInvoke:function(){var e=this,i=e.get("middleAngle"),n=t.quadrantd(i);return function(t,o){var s=e.p2p(e.x,e.y,i,.6);return{left:2<=n&&3>=n?s.x-t:s.x,top:3<=n?s.y-o:s.y}}},doConfig:function(){t.Sector3D.superclass.doConfig.call(this);var e=this._(),i=e.get("counterclockwise"),n=e.get("middleAngle");e.a=e.get("semi_major_axis"),e.b=e.get("semi_minor_axis"),e.h=e.get("cylinder_height"),t.Assert.isTrue(0<=e.a*e.b,"major&minor");var o=2*Math.PI,s=function(n){for(;0>n;)n+=o;return Math.abs(t.atan2Radian(0,0,e.a*Math.cos(n),i?-e.b*Math.sin(n):e.b*Math.sin(n)))},a=e.pushIf("increment",t.lowTo(5,e.a/10));if(e.sA=s.call(e,e.get("startAngle")),e.eA=s.call(e,e.get("endAngle")),e.mA=s.call(e,n),e.push("inc_x",a*Math.cos(o-e.mA)),e.push("inc_y",a*Math.sin(o-e.mA)),a*=2,e.get("label"))if(e.get("mini_label"))a=e.p2p(e.x,e.y,n,.5),e.doText(e,a.x,a.y);else{var s=t.quadrantd(n),r=e.p2p(e.x,e.y,n,a/e.a+1),l=e.p2p(e.x,e.y,n,.6*a/e.a+1),n=e.p2p(e.x,e.y,n,1);e.doLabel(e,n.x,n.y,s,[{x:n.x,y:n.y},{x:l.x,y:l.y},{x:r.x,y:r.y}],r.x,r.y,.4*a)}}}),t.Pie=t.extend(t.Chart,{configure:function(){t.Pie.superclass.configure.call(this),this.type="pie",this.set({radius:"100%",offset_angle:0,separate_angle:0,bound_event:"click",counterclockwise:!1,intellectLayout:!0,layout_distance:4,pop_animate:!1,mutex:!1,increment:void 0,sub_option:{label:{}}}),this.registerEvent("bound","rebound"),this.sectors=[],this.components.push(this.sectors),this.ILLUSIVE_COO=!0},toggle:function(t){this.sectors[t||0].toggle()},bound:function(t){this.sectors[t||0].bound()},rebound:function(t){this.sectors[t||0].rebound()},getSectors:function(){return this.sectors},doAnimation:function(t,e,i){var n=0,o=i.oA;i.sectors.each(function(s){n=i.animationArithmetic(t,0,s.get("totalAngle"),e),s.push("startAngle",o),s.push("endAngle",o+=n),i.is3D()||s.drawSector()}),i.is3D()&&i.proxy.drawSector()},parse:function(t){t.data.each(function(e,i){t.doParse(t,e,i)},t),t.localizer(t)},doParse:function(t,e,i){var n=e.name+" "+t.getPercent(e.value);t.doActing(t,e,null,i,n),t.push("sub_option.id",i),t.get("sub_option.label")&&t.push("sub_option.label.text",n),t.push("sub_option.listeners.changed",function(e,i){t.fireEvent(t,i?"bound":"rebound",[t,e.get("name")])}),t.sectors.push(t.doSector(t,e))},doSector:function(e){return new t[e.sub](e.get("sub_option"),e)},dolayout:function(e,i,n,o,s,a){(e.is3D()?t.inEllipse(e.get(e.X)-i,e.topY-n,e.a,e.b):t.distanceP2P(e.get(e.X),e.topY,i,n)<e.r)&&(n=e.topY-n,o.push("labelx",e.get(e.X)+(2*Math.sqrt(e.r*e.r-n*n)+s)*(0==a||3==a?1:-1)),o.localizer(o))},localizer:function(t){if(t.get("intellectLayout")){var e,i,n,o=[],s=[],a=t.get("layout_distance");t.sectors.each(function(t){t.isLabel()&&o.push(t.label)}),o.sor(function(t,e){return 0<Math.abs(Math.sin(t.get("angle")))-Math.abs(Math.sin(e.get("angle")))}),o.each(function(o){s.each(function(s){i=s.labelx,n=s.labely,(o.labely<=n&&n-o.labely-1<o.get(t.H)||o.labely>n&&o.labely-n-1<s.get(t.H))&&(o.labelx<=i&&i-o.labelx<o.get(t.W)||o.labelx>i&&o.labelx-i<s.get(t.W))&&(e=o.get("quadrantd"),o.push("labely",o.get("labely")+n-o.labely+(o.get(t.H)+a)*(1<e?-1:1)),o.localizer(o),t.dolayout(t,o.get("labelx"),o.get("labely")+o.get(t.H)/2*(2>e?-1:1),o,a,e))},t),s.push(o)})}},doConfig:function(){t.Pie.superclass.doConfig.call(this);var e,i=this._(),n=i.get("radius"),o=i.get("sub_option.label")?.35:.44,s=2*Math.PI;i.sub=i.is3D()?"Sector3D":"Sector2D",i.sectors.zIndex=i.get("z_index"),i.sectors.length=0,i.oA=t.angle2Radian(i.get("offset_angle"))%s,i.is3D()&&(o+=.06);var a=i.data.length,r=t.angle2Radian(t.between(0,90,i.get("separate_angle"))),l=s-r,r=r/a,c=i.oA+r,u=c;0==i.total&&(e=1/a),i.data.each(function(t,n){c+=(e||t.value/i.total)*l,n==a-1&&(c=s+i.oA),t.startAngle=u,t.endAngle=c,t.totalAngle=c-u,t.middleAngle=(u+c)/2,u=c+r},i),i.r=n=t.parsePercent(n,Math.floor(i.get("minDistance")*o)),i.topY=i.originXY(i,[n+i.get("l_originx"),i.get("r_originx")-n,i.get("centerx")],[i.get("centery")]).y,t.apply(i.get("sub_option"),t.clone([i.X,i.Y,"bound_event","mutex","increment"],i.options))}}),t.Pie2D=t.extend(t.Pie,{configure:function(){t.Pie2D.superclass.configure.call(this),this.type="pie2d"},doConfig:function(){t.Pie2D.superclass.doConfig.call(this);var e=this._();e.push("sub_option.radius",e.r),e.parse(e)}}),t.register("Pie2D"),t.Pie3D=t.extend(t.Pie,{configure:function(){t.Pie3D.superclass.configure.apply(this,arguments),this.type="pie3d",this.dimension=t._3D,this.set({zRotate:45,yHeight:30}),this.positive=!0},doSector:function(e,i){return e.push("sub_option.cylinder_height",i.cylinder_height?i.cylinder_height*e.get("zRotate_"):e.get("cylinder_height")),new t[e.sub](e.get("sub_option"),e)},one:function(e){var i,n,o,s=[],a=e.get("counterclockwise"),r=function(t,e){return 1+Math.sin(e?t+Math.PI:t)};lay=function(e,n,s,a){o=t.quadrantd(n),(e&&(0==o||3==o)||!e&&(2==o||1==o))&&i.push({g:n,z:n==s,x:a.x,y:a.y,a:a.a,b:a.b,color:t.dark(a.get("background_color")),h:a.h,F:a})},e.proxy=new t.Custom({z_index:e.get("z_index")+1,drawFn:function(){this.drawSector(),s=[],e.sectors.each(function(t){t.get("label")&&(t.expanded?s.push(t.label):t.label.draw())}),s.each(function(t){t.draw()})}}),e.proxy.drawSector=function(){e.sectors.each(function(t){e.T.ellipse(t.x,t.y+t.h,t.a,t.b,t.get("startAngle"),t.get("endAngle"),0,t.get("border.enable"),t.get("border.width"),t.get("border.color"),t.get("shadow"),a,!0)},e),i=[],n=[],e.sectors.each(function(e){lay(a,e.get("startAngle"),e.get("endAngle"),e),lay(!a,e.get("endAngle"),e.get("startAngle"),e),n=n.concat(t.visible(e.get("startAngle"),e.get("endAngle"),e))},e),i.sor(function(t,e){var i=r(t.g)-r(e.g);return 0==i?t.z:0<i}),i.each(function(t){e.T.sector3D.layerDraw.call(e.T,t.x,t.y,t.a+.5,t.b+.5,a,t.h,t.g,t.color)},e),e.processAnimation||n.sor(function(t,e){return 0>r((t.s+t.e)/2,1)-r((e.s+e.e)/2,1)}),n.each(function(t){e.T.sector3D.sPaint.call(e.T,t.f.x,t.f.y,t.f.a,t.f.b,t.s,t.e,a,t.f.h,t.f.get("f_color"))},e),e.sectors.each(function(t){e.T.ellipse(t.x,t.y,t.a,t.b,t.get("startAngle"),t.get("endAngle"),t.get("f_color"),t.get("border.enable"),t.get("border.width"),t.get("border.color"),!1,!1,!0)},e)},e.one=t.emptyFn},doConfig:function(){t.Pie3D.superclass.doConfig.call(this);var e=this._(),i=t.angle2Radian(e.get("zRotate"));e.push("cylinder_height",e.get("yHeight")*e.push("zRotate_",Math.abs(Math.cos(i)))),e.a=e.push("sub_option.semi_major_axis",e.r),e.b=e.push("sub_option.semi_minor_axis",e.r*Math.abs(Math.sin(i))),e.topY=e.push("sub_option.originy",e.get(e.Y)-e.get("yHeight")/2),e.parse(e),e.one(e),e.components.push(e.proxy)}}),t.register("Pie3D"),t.Donut2D=t.extend(t.Pie,{configure:function(){t.Donut2D.superclass.configure.call(this),this.type="donut2d",this.set({donutwidth:.3,center:{text:"",line_height:24,fontweight:"bold",fontsize:24}})},doConfig:function(){t.Donut2D.superclass.doConfig.call(this);var e=this._(),i=e.r;e.push("sub_option.radius",i),0<e.get("donutwidth")&&(1>e.get("donutwidth")?e.push("donutwidth",Math.floor(i*e.get("donutwidth"))):e.get("donutwidth")>=i&&e.push("donutwidth",0),e.push("sub_option.donutwidth",e.get("donutwidth"))),t.isString(e.get("center"))&&e.push("center",t.applyIf({text:e.get("center")},e.default_.center)),""!=e.get("center.text")&&(e.push("center.originx",e.get(e.X)),e.push("center.originy",e.get(e.Y)),e.push("center.textBaseline","middle"),e.center=new t.Text(e.get("center"),e),e.components.push(e.center)),e.parse(e)}}),t.register("Donut2D"),t.Column=t.extend(t.Chart,{configure:function(){t.Column.superclass.configure.call(this),this.type="column",this.set({coordinate:{},column_width:void 0,column_space:void 0,text_space:6,scaleAlign:"left",sub_option:{},label:{}}),this.registerEvent(),this.rectangles=[],this.labels=[],this.components.push(this.labels),this.components.push(this.rectangles)},doAnimation:function(t,e,i){var n;i.labels.each(function(t){t.draw()}),i.rectangles.each(function(o){n=Math.ceil(i.animationArithmetic(t,0,o.height,e)),o.push(i.Y,o.y+(o.height-n)),o.push(i.H,n),o.drawRectangle()})},getCoordinate:function(){return this.coo},doLabel:function(e,i,n,o,s){e.labels.push(new t.Text(t.apply(e.get("label"),{id:i,text:n,originx:o,originy:s}),e))},doParse:function(t,e,i,n){t.doActing(t,e,n,i)},engine:function(t){var e=t.get("column_width"),i=t.get("column_space"),n=t.coo.getScale(t.get("scaleAlign")),o=t.coo.valid_height,s=e/2,a=e*(t.get("group_fator")||0),r="complex"!=t.dataType?e+i:t.data.length*e+i+(t.is3D()?(t.data.length-1)*a:0),l=(u=t.coo.get("y_end"))-n.basic*o-(t.is3D()?t.get("zHeight")*(t.get("bottom_scale")-1)/2*t.get("yAngle_"):0),c=i+t.coo.get("x_start"),u=u+t.get("text_space")+t.coo.get("axis.width")[2];t.doEngine(t,e,i,n,o,s,a,r,c,l,u)},doConfig:function(){t.Column.superclass.doConfig.call(this);var e=this._();e.sub=e.is3D()?"Rectangle3D":"Rectangle2D",e.rectangles.length=0,e.labels.length=0,e.rectangles.zIndex=e.get("z_index"),e.labels.zIndex=e.get("z_index")+1,e.coo=t.Coordinate.coordinate_.call(e,function(){var t,i,n,o=e.data.length,s=e.get("coordinate.valid_width_value");"complex"==e.dataType?(n=e.get("labels").length,o=n*o+(e.is3D()?(o-1)*n*e.get("group_fator"):0),t=Math.floor(s/(n+1+o)),i=e.pushIf("column_width",t),n+=1):("stacked"==e.dataType&&(o=e.get("labels").length),t=Math.floor(2*s/(3*o+1)),i=e.pushIf("column_width",t),n=o+1),i*o>s&&(i=e.push("column_width",t)),e.push("column_space",(s-i*o)/n),e.is3D()&&(e.push("zHeight",e.get("column_width")*e.get("zScale")),e.push("sub_option.zHeight",e.get("zHeight")),e.push("sub_option.xAngle_",e.get("xAngle_")),e.push("sub_option.yAngle_",e.get("yAngle_")))}),e.push("sub_option.width",e.get("column_width"))}}),t.Column2D=t.extend(t.Column,{configure:function(){t.Column2D.superclass.configure.call(this),this.type="column2d"},doEngine:function(e,i,n,o,s,a,r,l,c,u,h){var g;e.data.each(function(i,n){g=(i.value-o.start)*s/o.distance,e.doParse(e,i,n,{id:n,originx:c+n*l,originy:u-(0<g?g:0),height:Math.abs(g)}),e.rectangles.push(new t[e.sub](e.get("sub_option"),e)),e.doLabel(e,n,i.name,c+l*n+a,h)},e)},doConfig:function(){t.Column2D.superclass.doConfig.call(this),this.engine(this)}}),t.register("Column2D"),t.Column3D=t.extend(t.Column2D,{configure:function(){t.Column3D.superclass.configure.call(this),this.type="column3d",this.dimension=t._3D,this.set({coordinate:{},xAngle:60,yAngle:20,zScale:1,bottom_scale:1.4})},doConfig:function(){t.Column3D.superclass.doConfig.call(this)}}),t.register("Column3D"),t.ColumnMulti2D=t.extend(t.Column,{configure:function(){t.ColumnMulti2D.superclass.configure.call(this),this.type="columnmulti2d",this.dataType="complex",this.set({labels:[]})},doEngine:function(e,i,n,o,s,a,r,l,c,u,h){var g;e.columns.each(function(a,d){a.item.each(function(n,a){g=(n.value-o.start)*s/o.distance,e.doParse(e,n,a,{id:d+"_"+a,originx:c+a*(i+r)+d*l,originy:u-(0<g?g:0),height:Math.abs(g)}),e.rectangles.push(new t[e.sub](e.get("sub_option"),e))},e),e.doLabel(e,d,a.name,c-.5*n+(d+.5)*l,h)},e)},doConfig:function(){t.ColumnMulti2D.superclass.doConfig.call(this),this.engine(this)}}),t.register("ColumnMulti2D"),t.ColumnMulti3D=t.extend(t.ColumnMulti2D,{configure:function(){t.ColumnMulti3D.superclass.configure.call(this),this.type="columnmulti3d",this.dataType="complex",this.dimension=t._3D,this.set({xAngle:60,yAngle:20,zScale:1,group_fator:.3,bottom_scale:1.4})},doConfig:function(){t.ColumnMulti3D.superclass.doConfig.call(this)}}),t.register("ColumnMulti3D"),t.ColumnStacked2D=t.extend(t.Column,{configure:function(){t.ColumnStacked2D.superclass.configure.call(this),this.type="columnstacked2d",this.dataType="stacked",this.set({percent:!1,labels:[],sub_option:{label:{color:"#ffffff"},valueAlign:"middle"}})},doEngine:function(e,i,n,o,s,a,r,l,c,u,h){var g,d,p,f=e.get("percent");e.columns.each(function(i,a){g=0,p=f?100/i.total:1,i.item.each(function(n,r){d=(n.value*p-o.start)*s/o.distance,n.total=i.total,e.doParse(e,n,r,{id:a+"_"+r,originx:c+a*l,originy:u-(0<d?d:0)-g,height:Math.abs(d)}),g+=d,e.rectangles.push(new t[e.sub](e.get("sub_option"),e))},e),e.doLabel(e,a,i.name,c-.5*n+(a+.5)*l,h)},e)},doConfig:function(){t.ColumnStacked2D.superclass.doConfig.call(this),this.engine(this)}}),t.register("ColumnStacked2D"),t.ColumnStacked3D=t.extend(t.ColumnStacked2D,{configure:function(){t.ColumnStacked3D.superclass.configure.call(this),this.type="columnstacked3d",this.dataType="stacked",this.dimension=t._3D,this.set({percent:!1,sub_option:{label:{color:"#ffffff"},valueAlign:"middle"},coordinate:{},xAngle:60,yAngle:20,zScale:1,bottom_scale:1.4})},doConfig:function(){t.ColumnStacked3D.superclass.doConfig.call(this)}}),t.register("ColumnStacked3D"),t.Bar=t.extend(t.Chart,{configure:function(){t.Bar.superclass.configure.call(this),this.type="bar",this.set({coordinate:{striped_direction:"h"},bar_height:void 0,bar_space:void 0,text_space:6,scaleAlign:"bottom",sub_option:{},label:{}})},getCoordinate:function(){return this.coo},doLabel:function(e,i,n,o,s){e.labels.push(new t.Text(t.apply(e.get("label"),{id:i,text:n,textAlign:"right",textBaseline:"middle",originx:o,originy:s}),e))},doParse:function(t,e,i,n){t.doActing(t,e,n,i)},engine:function(t){var e=t.get("bar_height"),i=t.get("bar_space"),n=t.coo.getScale(t.get("scaleAlign")),o=t.coo.valid_width,s=e/2,a="complex"!=t.dataType?e+i:t.data.length*e+i,r=t.coo.get("x_start")+n.basic*o,l=t.coo.get(t.X)-t.get("text_space")-t.coo.get("axis.width")[3],c=t.coo.get("y_start")+i;t.doEngine(t,e,i,n,o,s,a,r,l,c)},doAnimation:function(t,e,i){i.labels.each(function(t){t.draw()}),i.rectangles.each(function(n){n.push(i.W,Math.ceil(i.animationArithmetic(t,0,n.width,e))),n.drawRectangle()})},doConfig:function(){t.Bar.superclass.doConfig.call(this);var e=this._();e.rectangles=[],e.labels=[],e.rectangles.zIndex=e.get("z_index"),e.labels.zIndex=e.get("z_index")+1,e.components.push(e.labels),e.components.push(e.rectangles),e.coo=t.Coordinate.coordinate_.call(e,function(){var t,i,n,o=e.data.length,s=e.get("coordinate.valid_height_value");"complex"==e.dataType?(n=e.get("labels").length,o=n*o+(e.is3D()?(o-1)*n*e.get("group_fator"):0),t=Math.floor(s/(n+1+o)),i=e.pushIf("bar_height",t),n+=1):("stacked"==e.dataType&&(o=e.get("labels").length),t=Math.floor(2*s/(3*o+1)),i=e.pushIf("bar_height",t),n=o+1),i*o>s&&(i=e.push("bar_height",t)),e.push("bar_space",(s-i*o)/n)}),e.push("sub_option.height",e.get("bar_height")),e.push("sub_option.valueAlign",e.R),e.push("sub_option.tipAlign",e.R)}}),t.Bar2D=t.extend(t.Bar,{configure:function(){t.Bar2D.superclass.configure.call(this),this.type="bar2d"},doEngine:function(e,i,n,o,s,a,r,l,c,u){var h;e.data.each(function(i,n){h=(i.value-o.start)*s/o.distance,e.doParse(e,i,n,{id:n,originy:u+n*r,width:Math.abs(h),originx:l+(0<h?0:-Math.abs(h))}),e.rectangles.push(new t.Rectangle2D(e.get("sub_option"),e)),e.doLabel(e,n,i.name,c,u+n*r+a)},e)},doConfig:function(){t.Bar2D.superclass.doConfig.call(this),this.engine(this)}}),t.register("Bar2D"),t.BarMulti2D=t.extend(t.Bar,{configure:function(){t.BarMulti2D.superclass.configure.call(this),this.type="barmulti2d",this.dataType="complex",this.set({labels:[]})},doEngine:function(e,i,n,o,s,a,r,l,c,u){var h;e.columns.each(function(a,g){a.item.each(function(n,a){h=(n.value-o.start)*s/o.distance,e.doParse(e,n,a,{id:g+"_"+a,originy:u+a*i+g*r,width:Math.abs(h),originx:l+(0<h?0:-Math.abs(h))}),e.rectangles.push(new t.Rectangle2D(e.get("sub_option"),e))},e),e.doLabel(e,g,a.name,c,u-.5*n+(g+.5)*r)},e)},doConfig:function(){t.BarMulti2D.superclass.doConfig.call(this),this.engine(this)}}),t.register("BarMulti2D"),t.BarStacked2D=t.extend(t.Bar,{configure:function(){t.BarStacked2D.superclass.configure.call(this),this.type="barstacked2d",this.dataType="stacked",this.set({percent:!1,labels:[],sub_option:{label:{color:"#ffffff"},valueAlign:"middle"}})},doEngine:function(e,i,n,o,s,a,r,l,c,u){var h,g,d,p=e.get("percent");e.columns.each(function(i,a){h=0,d=p?100/i.total:1,i.item.each(function(n,c){g=(n.value*d-o.start)*s/o.distance,n.total=i.total,e.doParse(e,n,c,{id:a+"_"+c,originy:u+a*r,originx:l+(0<g?0:-Math.abs(g))+h,width:Math.abs(g)}),h+=g,e.rectangles.push(new t.Rectangle2D(e.get("sub_option"),e))},e),e.doLabel(e,a,i.name,c,u-.5*n+(a+.5)*r)},e)},doConfig:function(){t.BarStacked2D.superclass.doConfig.call(this),this.push("sub_option.valueAlign",this.C),this.engine(this)}}),t.register("BarStacked2D"),t.LineSegment=t.extend(t.Component,{configure:function(){t.LineSegment.superclass.configure.apply(this,arguments),this.type="linesegment",this.set({brushsize:1,intersection:!0,label:{},sign:"round",area_color:null,hollow:!0,hollow_inside:!0,hollow_color:"#FEFEFE",smooth:!1,smoothing:1.5,point_size:6,points:[],keep_with_coordinate:!1,shadow_blur:1,shadow_offsety:1,point_space:0,coordinate:null,event_range_x:0,limit_y:!1,tip_offset:2,event_range_y:0}),this.registerEvent("parseText"),this.tip=null},drawSegment:function(){var t=this._();t.polygons.each(function(e){t.T.polygon.apply(t.T,e)}),t.T.shadowOn(t.get("shadow")),t.lines.each(function(e){t.T.lineArray.apply(t.T,e)}),t.intersections.each(function(e){t.sign_plugin?t.sign_plugin_fn.apply(t,e):t.T.round0.apply(t.T,e)}),t.get("shadow")&&t.T.shadowOff()},doDraw:function(t){t.drawSegment(),t.get("label")&&t.labels.each(function(t){t.draw()})},isEventValid:function(){},tipInvoke:function(){var t=this.x,e=this.get("tip_offset"),i=this.get("point_size")+e,n=this;return function(o,s,a){var r=a.left,a=a.top;return{left:r=3>n.tipPosition&&0<r-o-t-e||2<n.tipPosition&&0>r-o-t-e?r-(o+e):r+e,top:a=0==n.tipPosition%2?a+i:a-s-i}}},PP:function(t,e,i,n,o,s){t.get("area")&&t.polygons.push([t.get("area_color")||t.get("light_color2"),0,t.get("brushsize"),0,0,t.get("area_opacity"),t.get("smooth")?e:[{x:i,y:n}].concat(e.concat([{x:o,y:s}])),t.get("smooth"),t.get("smoothing")||1.5,[{x:i,y:n},{x:o,y:s}]])},parse:function(e){e.polygons=[],e.lines=[],e.intersections=[],e.labels=[];var i=e.get("points"),n=e.get("intersection"),o=!!e.get("label"),s=[],a=!1,r=e.get("smooth"),l=e.get("smoothing")||1.5,c=e.get("f_color"),u=e.get("brushsize"),h=e.get("point_size");if(n){var g=e.getPlugin("sign"),d=c,p=e.get("hollow_color");e.sign_plugin=t.isFunction(g),e.sign_plugin_fn=g,e.get("hollow_inside")&&(d=p,p=c)}i.each(function(i){i.x_=i.x,i.y_=i.y,!i.ignored&&o&&(e.push("label.originx",i.x),e.push("label.originy",i.y-h/2-1),e.push("label.text",e.fireString(e,"parseText",[e,i.value],i.value)),t.applyIf(e.get("label"),{textBaseline:"bottom",color:e.get("f_color")}),e.labels.push(new t.Text(e.get("label"),e))),i.ignored&&a?(e.lines.push([s,u,c,r,l]),e.PP(e,s,s[0].x,e.y,s[s.length-1].x,e.y),s=[],a=!1):i.ignored||(s.push(i),a=!0),n&&!i.ignored&&e.intersections.push(e.sign_plugin?[e.T,e.get("sign"),i,h,i.color||d,i.hollow_color||p]:e.get("hollow")?[i,h/2-u+1,i.color||d,u+1,i.hollow_color||p]:[i,h/2,i.color||d])}),s.length&&(e.lines.push([s,u,c,r,l]),e.PP(e,s,s[0].x,e.y,s[s.length-1].x,e.y))},doConfig:function(){t.LineSegment.superclass.doConfig.call(this),t.Assert.isTrue(0<this.get("point_space"),"point_space");var e=this._(),i=3*e.get("point_size")/2,n=e.get("point_space"),o=e.get("event_range_y"),s=e.get("event_range_x"),a=e.get("tipInvokeHeap"),r=e.get("points"),l=e.get("name");e.parse(e),(0>=s||s>n/2)&&(s=e.push("event_range_x",n/2)),0==o&&(o=e.push("event_range_y",i/2)),e.get("tip.enable")&&(e.on("mouseover",function(){a.push(e),e.tipPosition=a.length}).on("mouseout",function(){a.pop()}),e.push("tip.invokeOffsetDynamic",!0),e.tip=new t.Tip(e.get("tip"),e));var c=e.get("coordinate"),u=e.get("limit_y"),h=e.get("keep_with_coordinate"),g=function(t,e,i){return!(t.ignored||!(Math.abs(e-t.x)<s)||u&&!(u&&Math.abs(i-t.y)<o))},d=function(t){return{valid:!0,name:l,value:r[t].value,text:r[t].text,top:r[t].y,left:r[t].x,i:t,hit:!0}};e.isEventValid=function(i){if(c&&!c.isEventValid(i,c).valid)return{valid:!1};var o=Math.floor((i.x-e.x)/n);if(o<0||o>=r.length-1)return o=t.between(0,r.length-1,o),g(r[o],i.x,i.y)?d(o):{valid:h};for(var s=o;s<=o+1;s++)if(g(r[s],i.x,i.y))return d(s);return{valid:h}}}}),t.Line=t.extend(t.Chart,{configure:function(){t.Line.superclass.configure.call(this),this.type="line",this.set({brushsize:1,coordinate:{axis:{width:[0,0,2,2]}},crosshair:{enable:!1},tipMocker:null,tipMockerOffset:null,scaleAlign:"left",labelAlign:"bottom",labels:[],label_space:6,proportional_spacing:!0,sub_option:{},legend:{sign:"bar"},label:{}}),this.registerEvent("parsePoint"),this.lines=[],this.components.push(this.lines)},getCoordinate:function(){return this.coo},doConfig:function(){t.Line.superclass.doConfig.call(this);var e=this._(),i=1==e.data.length;e.lines.length=0,e.lines.zIndex=e.get("z_index");var n=e.pushIf("sub_option.keep_with_coordinate",i);e.get("crosshair.enable")&&(e.pushIf("crosshair.hcross",i),e.push("crosshair.invokeOffset",function(t){return(t=e.lines[0].isEventValid(t)).valid?t:n})),e.Combination||(e.push("coordinate.crosshair",e.get("crosshair")),e.pushIf("coordinate.scale",[{position:e.get("scaleAlign"),max_scale:e.get("maxValue")},{position:e.get("labelAlign"),start_scale:1,scale:1,end_scale:e.get("maxItemSize"),labels:e.get("labels"),label:e.get("label")}])),e.coo=t.Coordinate.coordinate_.call(e),e.Combination&&(e.coo.push("crosshair",e.get("crosshair")),e.coo.doCrosshair(e.coo));var o=i=e.coo.valid_width,s=e.get("maxItemSize")-1,a=i/s,r=e.get("point_space");if(e.get("proportional_spacing")&&(r&&r<a?o=s*r:e.push("point_space",a)),e.push("sub_option.width",o),e.push("sub_option.height",e.coo.valid_height),e.push("sub_option.originx",e.coo.get("x_start")+(i-o)/2),e.push("sub_option.originy",e.coo.get("y_end")),e.get("tip.enable")&&!e.mocker&&t.isFunction(e.get("tipMocker"))){e.push("sub_option.tip.enable",!1),e.push("tip.invokeOffsetDynamic",!0);var l,c,u,h,g=e.coo.get(e.X),d=e.coo.get(e.Y),p=e.coo.height,f=e.get("tipMockerOffset"),f=t.isNumber(f)?0>f?0:1<f?1:f:null;e.push("tip.invokeOffset",function(t,e,i){return null!=f?i.top=d+(p-e)*f:(i.top=i.maxTop-(i.maxTop-i.minTop)/3-e,(e>p||d>i.top)&&(i.top=d)),{left:i.left-t-g>5?i.left-t-5:i.left+5,top:i.top}});var y=e.get("tip.listeners.parseText");y&&delete e.get("tip.listeners").parseText,e.mocker=new t.Custom({eventValid:function(t){return u=e.lines[0].isEventValid(t),u.hit=c!=u.i,u.valid&&(c=u.i,l=[],e.lines.each(function(e,i){h=e.isEventValid(t),0==i?u.minTop=u.maxTop=h.top:(u.minTop=Math.min(u.minTop,h.top),u.maxTop=Math.max(u.maxTop,h.top)),l.push(y?y(null,h.name,h.value,h.text,h.i):h.name+" "+h.value)}),u.text=e.get("tipMocker").call(e,l,u.i)||"tipMocker not return"),!!u.valid&&u}}),new t.Tip(e.get("tip"),e.mocker),e.register(e.mocker)}e.pushIf("sub_option.area_opacity",e.get("area_opacity"))}}),t.LineBasic2D=t.extend(t.Line,{configure:function(){t.LineBasic2D.superclass.configure.call(this),this.type="basicline2d",this.tipInvokeHeap=[]},doAnimation:function(t,e,i){i.lines.each(function(n){n.get("points").each(function(o){o.y=n.y-Math.ceil(i.animationArithmetic(t,0,n.y-o.y_,e))}),n.drawSegment()})},doConfig:function(){t.LineBasic2D.superclass.doConfig.call(this);var e,i,n,o,s,a,r=this._(),l=r.coo.valid_height,c=r.get("point_space"),u=r.get("sub_option.originx");r.push("sub_option.tip.showType","follow"),r.push("sub_option.coordinate",r.coo),r.push("sub_option.tipInvokeHeap",r.tipInvokeHeap),r.push("sub_option.point_space",c),r.data.each(function(h){e=r.coo.getScale(h.scaleAlign||r.get("scaleAlign")),s=r.get("sub_option.originy")-e.basic*l,i=[],h.value.each(function(g,d){n=c*d,o=(g-e.start)*l/e.distance,a={x:u+n,y:s-o,value:g,text:h.name+" "+g},t.merge(a,r.fireEvent(r,"parsePoint",[h,g,n,o,d,e])),i.push(a)},r),t.merge(r.get("sub_option"),h),r.push("sub_option.points",i),r.push("sub_option.brushsize",h.linewidth||h.line_width),r.lines.push(new t.LineSegment(r.get("sub_option"),r))},this)}}),t.register("LineBasic2D"),t.Area2D=t.extend(t.LineBasic2D,{configure:function(){t.Area2D.superclass.configure.call(this),this.type="area2d",this.set({area_opacity:.3})},doConfig:function(){this.push("sub_option.area",!0),t.Area2D.superclass.doConfig.call(this)}}),t.register("Area2D")}(iChart);