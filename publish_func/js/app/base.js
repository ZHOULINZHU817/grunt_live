/*frame by Ella Liu*/
!function(){var e;(function(t,a,o){var n=-1!==a.location.host.indexOf("localhost")||-1!==a.location.host.indexOf("10.65");(e={util:{redirect:function(e,t){t?a.location.replace(e):a.location.href=e},getUrlParam:function(e,t){var o=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),n=("string"==typeof t?t:a.location.search).substr(1).match(o);return n=null!=n?decodeURIComponent(n[2]):void 0},html_decode:function(e){var t="";return 0==e.length?"":(t=e.replace(/&amp;/g,"&"),t=t.replace(/&lt;/g,"<"),t=t.replace(/&gt;/g,">"),t=t.replace(/&nbsp;/g," "),t=t.replace(/&#39;/g,"'"),t=t.replace(/&quot;/g,'"'),t=t.replace(/<br>/g,"\n"))},isWeiXin:function(){return"micromessenger"==a.navigator.userAgent.toLowerCase().match(/MicroMessenger/i)}},UI:{alert:function(e,o,n,r,s){var i=n||1e3;t(".dialog_top").stop().remove();var c='<article class="ns-show"><div class="dialog_top"><div class="dialog_mask"></div><p class="text">'+e+"</p></div></article>";t("body").prepend(c);var l=t(a).scrollTop()||document.documentElement.scrollTop||a.pageYOffset||document.body.scrollTop;t(".ns-show").css({top:56+l+"px"}),r&&t(".ns-show .text").append('，<a href="'+s+'">'+r+"</a>"),setTimeout(function(){t(".dialog_top").stop().fadeOut("fast",function(){t(".ns-show").remove()}),o&&o()},i)},vcode_count_down:function(a,o){clearTimeout(e._data.timer);var n={start:60,end:0,suffix:"",speed:1,cb:function(){console.log("count down over!")},set_context:function(e,t){e.html(t)}};t.extend(n,o);var r=a.html();a.addClass("btn-disabled"),a.data("cd",parseInt(n.start,10)+1);var s=function(){if(n.end!=a.data("cd")){var t=a.data("cd")-1;t<0?(n.set_context(a,"<span>获取验证码</span>"),n.cb()):(a.data("cd",t),n.set_context(a,"<span>"+t+n.suffix+"秒后重新发送</span>"),e._data.timer=setTimeout(s,1e3*n.speed))}else a.removeClass("btn-disabled").html(r),n.cb()};s()},loading:function(e){t(".loading").remove(),e?t("body").prepend("<div class='loading'><p></p></div>"):t(".loading").remove()}},helper:{reqJs:function(a,o){function n(i){t.getScript(e._data.siteurl+a[i],function(){++s<r?n(i+1):o()})}if("array"===Object.prototype.toString.call(a).slice(8,-1).toLowerCase()){var r=a.length;if(r>0){var s=0;n(0)}else o()}else t.getScript(a,o)},ajax_success:function(t,a,o){switch(o=o||function(t){e.UI.alert(t.head.msg)},t.body&&t.body.errMsg&&(t.head.msg=t.body.errMsg),t.head.code){case"200":a(t.body);break;case"500":t.head.msg="网络错误，请稍后再试！",o(t);break;case"1043":case"1012":case"401":e.util.redirectR("/auth/login");break;case"1019":"非法流程"===t.head.msg&&e.UI.alert(t.head.msg,function(){e.util.redirect("/home")});break;default:o(t)}},ajax_error:function(t,a,o,n){switch(n=n||function(t){e.UI.alert(t)},a){case"timeout":n("服务器响应超时，请重新再试！");break;case"error":401==t.status?e.util.redirectR("/auth/login"):n("服务器错误，请重新再试！");break;case"abort":console.log("用户放弃请求");break;case"parsererror":console.log("ajax parsererror:"+o);break;case null:default:n("网络错误，请稍后再试！")}},ajx:function(a,o){if(a.dataType="json",a.cacheTime){var r="",s=(new Date).getTime();r=Math.ceil(s/a.cacheTime),-1===a.url.indexOf("?")?a.url+="?_="+r:a.url+="&_="+r}t.extend(a,{url:a.api,data:o}),a.type=n?"GET":"POST","function"!=typeof a.error&&(a.error=function(t,a,o){e.helper.ajax_error(t,a,o)}),t.ajax(a)}},plugin:{},session:{},_data:{baseurl:"/",islocal:n}}).sessionStorage=a.sessionStorage;try{a.sessionStorage.setItem("testval",""),a.sessionStorage.removeItem("testval")}catch(t){e.sessionStorage={setItem:function(t,a){e.util.cookie(t,a,{expires:.05,path:"/"})},getItem:function(t,a){return e.util.cookie(t)},removeItem:function(t){var a=new Date;a.setTime(a.getTime()-1e4),e.util.cookie(t,null)},clear:function(){}}}a.XJB=e,t(function(){t("form .form_line input").keyup(function(){var e=t(this);e.val()&&e.siblings(".delete").show().click(function(){var e=t(this);e.parents(".form_line").find("input").val(""),e.hide()})}),e.UI.loading(!1)})})(jQuery,window)}();